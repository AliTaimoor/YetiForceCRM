{"version":3,"file":"Calendar.min.js","sources":["Calendar.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n/** Class representing a calendar. */\nwindow.Calendar_Js = class {\n\tstatic monthFormat = {\n\t\t'yyyy-mm-dd': 'YYYY-MMMM',\n\t\t'mm-dd-yyyy': 'MMMM-YYYY',\n\t\t'dd-mm-yyyy': 'MMMM-YYYY',\n\t\t'yyyy.mm.dd': 'YYYY.MMMM',\n\t\t'mm.dd.yyyy': 'MMMM.YYYY',\n\t\t'dd.mm.yyyy': 'MMMM.YYYY',\n\t\t'yyyy/mm/dd': 'YYYY/MMMM',\n\t\t'mm/dd/yyyy': 'MMMM/YYYY',\n\t\t'dd/mm/yyyy': 'MMMM/YYYY'\n\t};\n\tstatic viewsNamesMap = {\n\t\tmonth: 'dayGridMonth',\n\t\tbasicWeek: 'dayGridWeek',\n\t\tbasicDay: 'dayGridDay',\n\t\ttimeGridWeek: 'timeGridWeek',\n\t\ttimeGridDay: 'timeGridDay'\n\t};\n\tstatic viewsNamesLabels = {\n\t\tdayGridMonth: 'month',\n\t\tdayGridWeek: 'week',\n\t\tdayGridDay: 'day',\n\t\tlistWeek: 'week',\n\t\ttimeGridWeek: 'week',\n\t\ttimeGridDay: 'day'\n\t};\n\t/**\n\t * Create calendar's options.\n\t * @param {jQuery} container\n\t * @param {bool} readonly\n\t * @param {boolean} browserHistory\n\t */\n\tconstructor(container = $('.js-base-container'), readonly = false, browserHistory = true) {\n\t\tthis.calendarCreateView = false;\n\t\tthis.container = container;\n\t\tthis.calendarView = container.find('.js-calendar__container');\n\t\tthis.readonly = readonly;\n\t\tthis.eventCreate = app.getMainParams('eventCreate');\n\t\tthis.eventEdit = app.getMainParams('eventEdit');\n\t\tthis.browserHistory = !readonly && browserHistory;\n\t\tthis.sidebarView = {\n\t\t\tlength: 0\n\t\t};\n\t\tthis.startHour = app.getMainParams('startHour');\n\t\tthis.endHour = app.getMainParams('endHour');\n\t\tif (this.startHour == '') {\n\t\t\tthis.startHour = '00';\n\t\t}\n\t\tif (this.endHour == '') {\n\t\t\tthis.endHour = '00';\n\t\t}\n\t\tthis.browserHistoryOptions = {};\n\t\tthis.browserHistoryConfig = this.browserHistory ? this.setBrowserHistoryOptions() : {};\n\t\tthis.calendarOptions = this.setCalendarOptions();\n\t\tthis.eventTypeKeyName = false;\n\t\tthis.module = app.getModuleName();\n\n\t\tapp.event.on('QuickEdit.AfterSaveFinal', () => {\n\t\t\tthis.reloadCalendarData();\n\t\t});\n\t}\n\t/**\n\t * Set calendar's options.\n\t * @returns {object}\n\t */\n\tsetCalendarOptions() {\n\t\treturn Object.assign(\n\t\t\tthis.setCalendarBasicOptions(),\n\t\t\tthis.setCalendarAdvancedOptions(),\n\t\t\tthis.setCalendarModuleOptions(),\n\t\t\tthis.browserHistoryOptions\n\t\t);\n\t}\n\t/**\n\t * Set calendar's basic options.\n\t * @returns {object}\n\t */\n\tsetCalendarBasicOptions() {\n\t\tlet eventLimit = app.getMainParams('eventLimit'),\n\t\t\tuserView = app.getMainParams('activity_view'),\n\t\t\tdefaultView = app.moduleCacheGet('defaultView'),\n\t\t\tuserTimeFormat = CONFIG.hourFormat;\n\t\tif (eventLimit == 'true') {\n\t\t\teventLimit = true;\n\t\t} else if (eventLimit == 'false') {\n\t\t\teventLimit = false;\n\t\t} else {\n\t\t\teventLimit = parseInt(eventLimit) + 1;\n\t\t}\n\t\tif (userView === 'Today') {\n\t\t\tuserView = app.getMainParams('dayView');\n\t\t} else if (userView === 'This Week') {\n\t\t\tuserView = app.getMainParams('weekView');\n\t\t} else if (userView === 'This Year') {\n\t\t\tuserView = 'year';\n\t\t} else {\n\t\t\tuserView = 'dayGridMonth';\n\t\t}\n\t\tif (defaultView != null) {\n\t\t\tuserView = defaultView;\n\t\t}\n\t\tif (userTimeFormat == 24) {\n\t\t\tuserTimeFormat = {\n\t\t\t\thour: '2-digit',\n\t\t\t\tminute: '2-digit',\n\t\t\t\thour12: false,\n\t\t\t\tmeridiem: false\n\t\t\t};\n\t\t} else {\n\t\t\tuserTimeFormat = {\n\t\t\t\thour: 'numeric',\n\t\t\t\tminute: '2-digit',\n\t\t\t\tmeridiem: 'short'\n\t\t\t};\n\t\t}\n\n\t\tlet options = {\n\t\t\teventTimeFormat: userTimeFormat,\n\t\t\tslotLabelFormat: userTimeFormat,\n\t\t\tinitialView: Calendar_Js.viewsNamesMap[userView] ? Calendar_Js.viewsNamesMap[userView] : userView,\n\t\t\tforceEventDuration: true,\n\t\t\tdefaultTimedEventDuration: '01:00:00',\n\t\t\tdayMaxEvents: eventLimit,\n\t\t\tselectMirror: true,\n\t\t\tscrollTime: this.startHour + ':00'\n\t\t};\n\t\tif (app.moduleCacheGet('start') !== null && app.moduleCacheGet('start') !== undefined) {\n\t\t\tlet s = new Date(app.moduleCacheGet('start'));\n\t\t\tlet e = new Date(app.moduleCacheGet('end'));\n\t\t\toptions.initialDate = App.Fields.Date.dateToDbFormat(new Date(e - (e - s) / 2));\n\t\t}\n\t\treturn Object.assign(this.setCalendarMinimalOptions(), options);\n\t}\n\t/**\n\t * Set calendar's minimal options.\n\t * @returns {object}\n\t */\n\tsetCalendarMinimalOptions() {\n\t\tlet hiddenDays = [];\n\t\tif (app.getMainParams('switchingDays') === 'workDays') {\n\t\t\thiddenDays = app.getMainParams('hiddenDays', true);\n\t\t}\n\t\treturn {\n\t\t\tnavLinks: true,\n\t\t\tfirstDay: CONFIG.firstDayOfWeekNo,\n\t\t\tselectable: true,\n\t\t\thiddenDays: hiddenDays,\n\t\t\tmoreLinkContent: app.vtranslate('JS_MORE'),\n\t\t\tallDayText: app.vtranslate('JS_ALL_DAY'),\n\t\t\tnoEventsText: app.vtranslate('JS_NO_RECORDS'),\n\t\t\tbuttonText: {\n\t\t\t\ttoday: '',\n\t\t\t\tyear: app.vtranslate('JS_YEAR'),\n\t\t\t\tweek: app.vtranslate('JS_WEEK'),\n\t\t\t\tmonth: app.vtranslate('JS_MONTH'),\n\t\t\t\tday: app.vtranslate('JS_DAY'),\n\t\t\t\tdayGridMonth: app.vtranslate('JS_MONTH'),\n\t\t\t\tdayGridWeek: app.vtranslate('JS_WEEK'),\n\t\t\t\tlistWeek: app.vtranslate('JS_WEEK'),\n\t\t\t\tdayGridDay: app.vtranslate('JS_DAY'),\n\t\t\t\ttimeGridDay: app.vtranslate('JS_DAY'),\n\t\t\t\tlist: app.vtranslate('JS_CALENDAR_LIST')\n\t\t\t},\n\t\t\tbuttonHints: {\n\t\t\t\tprev(buttonText) {\n\t\t\t\t\treturn `${app.vtranslate('JS_PREV')} ${buttonText}`;\n\t\t\t\t},\n\t\t\t\tnext(buttonText) {\n\t\t\t\t\treturn `${app.vtranslate('JS_NEXT')} ${buttonText}`;\n\t\t\t\t},\n\t\t\t\ttoday(buttonText) {\n\t\t\t\t\treturn `${app.vtranslate('JS_CURRENT')} ${buttonText}`;\n\t\t\t\t}\n\t\t\t},\n\t\t\tviewHint: '$0',\n\t\t\tnavLinkHint: (_dateStr, zonedDate) => {\n\t\t\t\treturn App.Fields.Date.dateToUserFormat(zonedDate);\n\t\t\t},\n\t\t\tdayHeaderContent: (arg) => {\n\t\t\t\tif (this.container.width() < 600) {\n\t\t\t\t\treturn App.Fields.Date.daysTranslated[arg.date.getDay()];\n\t\t\t\t}\n\t\t\t\treturn App.Fields.Date.fullDaysTranslated[arg.date.getDay()];\n\t\t\t}\n\t\t};\n\t}\n\t/**\n\t * Set calendar's advanced options.\n\t * @returns {object}\n\t */\n\tsetCalendarAdvancedOptions() {\n\t\tconst self = this;\n\t\treturn {\n\t\t\teditable: !this.readonly && this.eventEdit == 1,\n\t\t\tselectable: !this.readonly && this.eventCreate == 1,\n\t\t\theaderToolbar: {\n\t\t\t\tleft: 'dayGridMonth,' + app.getMainParams('weekView') + ',' + app.getMainParams('dayView'),\n\t\t\t\tcenter: 'title,today',\n\t\t\t\tright: 'prev,next'\n\t\t\t},\n\t\t\tallDaySlot: app.getMainParams('allDaySlot'),\n\t\t\tviews: {\n\t\t\t\tbasic: {\n\t\t\t\t\tdayMaxEvents: false\n\t\t\t\t},\n\t\t\t\tdayGridMonth: {\n\t\t\t\t\ttitleFormat: (args) => {\n\t\t\t\t\t\treturn this.formatDate(args.date, 'month');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttimeGridWeek: {\n\t\t\t\t\ttitleFormat: (args) => {\n\t\t\t\t\t\treturn this.formatDate(args.date, 'week');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttimeGridDay: {\n\t\t\t\t\ttitleFormat: (args) => {\n\t\t\t\t\t\treturn this.formatDate(args.date, 'day');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tlistWeek: {\n\t\t\t\t\ttitleFormat: (args) => {\n\t\t\t\t\t\treturn this.formatDate(args.date, 'week');\n\t\t\t\t\t},\n\t\t\t\t\tdayHeaderContent: (arg) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\thtml: `<span class=\"fc-list-day-text\">${App.Fields.Date.fullDaysTranslated[arg.date.getDay()]}</span>\n\t\t\t\t\t\t\t<span class=\"fc-list-day-side-text\">${App.Fields.Date.dateToUserFormat(arg.date)}</span>`\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tbasicDay: {\n\t\t\t\t\ttype: 'timeGridDay'\n\t\t\t\t}\n\t\t\t},\n\t\t\teventDrop: self.updateEvent,\n\t\t\teventResize: self.updateEvent,\n\t\t\tdatesSet: (dateInfo) => {\n\t\t\t\tapp.event.trigger('Calendar.DatesSet', dateInfo, this);\n\t\t\t\tself.loadCalendarData();\n\t\t\t},\n\t\t\teventContent: self.eventRenderer,\n\t\t\theight: this.setCalendarHeight()\n\t\t};\n\t}\n\t/**\n\t * Set calendar module's options.\n\t * @returns {object}\n\t */\n\tsetCalendarModuleOptions() {\n\t\treturn {};\n\t}\n\t/**\n\t * Invokes FullCalendar with options.\n\t */\n\trenderCalendar() {\n\t\tthis.fullCalendar = new FullCalendar.Calendar(this.calendarView.get(0), this.calendarOptions);\n\t\tthis.fullCalendar.render();\n\t\tthis.registerViewRenderEvents();\n\t}\n\t/**\n\t * Get calendar container.\n\t * @returns {(boolean|jQuery)}\n\t */\n\tgetCalendarView() {\n\t\tif (this.calendarView == false) {\n\t\t\tthis.calendarView = this.container.find('.js-calendar__container');\n\t\t}\n\t\treturn this.calendarView;\n\t}\n\t/**\n\t * Load calendar data\n\t */\n\tloadCalendarData() {\n\t\tconst defaultParams = this.getDefaultParams();\n\t\tthis.fullCalendar.removeAllEvents();\n\t\tif (!defaultParams.emptyFilters) {\n\t\t\tconst progressInstance = $.progressIndicator({ blockInfo: { enabled: true } });\n\t\t\tAppConnector.request(defaultParams).done((events) => {\n\t\t\t\tthis.fullCalendar.addEventSource(events.result);\n\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t});\n\t\t}\n\t}\n\t/**\n\t * Reload calendar data after changing search parameters\n\t */\n\treloadCalendarData() {\n\t\tthis.loadCalendarData();\n\t}\n\t/**\n\t * Default params\n\t * @returns {{module: string, action: string, mode: string, start: string, end: string, user: *, cvid: int, emptyFilters: boolean}}\n\t */\n\tgetDefaultParams() {\n\t\tlet users = app.moduleCacheGet('calendar-users') || CONFIG.userId,\n\t\t\tsideBar = this.getSidebarView(),\n\t\t\tfilters = [],\n\t\t\tparams = {\n\t\t\t\tmodule: this.module ? this.module : CONFIG.module,\n\t\t\t\taction: 'Calendar',\n\t\t\t\tmode: 'getEvents',\n\t\t\t\tstart: App.Fields.Date.dateToUserFormat(this.fullCalendar.view.activeStart),\n\t\t\t\tend: App.Fields.Date.dateToUserFormat(this.fullCalendar.view.activeEnd),\n\t\t\t\tuser: users,\n\t\t\t\tcvid: this.getCurrentCvId(),\n\t\t\t\temptyFilters: users.length === 0\n\t\t\t};\n\t\tsideBar.find('.calendarFilters .filterField').each(function () {\n\t\t\tlet element = $(this),\n\t\t\t\tname,\n\t\t\t\tvalue;\n\t\t\tif (element.attr('type') == 'checkbox') {\n\t\t\t\tname = element.val();\n\t\t\t\tvalue = element.prop('checked') ? 1 : 0;\n\t\t\t} else {\n\t\t\t\tname = element.attr('name');\n\t\t\t\tvalue = element.val();\n\t\t\t}\n\t\t\tfilters.push({ name: name, value: value });\n\t\t});\n\t\tif (filters.length) {\n\t\t\tparams.filters = filters;\n\t\t}\n\t\tsideBar.find('.js-sidebar-filter-container').each((_, e) => {\n\t\t\tlet element = $(e);\n\t\t\tlet name = element.data('name');\n\t\t\tlet cacheName = element.data('cache');\n\t\t\tif (name && cacheName && app.moduleCacheGet(cacheName)) {\n\t\t\t\tparams[name] = app.moduleCacheGet(cacheName);\n\t\t\t\tparams.emptyFilters = !params.emptyFilters && params[name].length === 0;\n\t\t\t}\n\t\t});\n\t\tsideBar.find('.js-filter__container_checkbox_list').each((_, e) => {\n\t\t\tlet filters = [];\n\t\t\tlet element = $(e);\n\t\t\tlet name = element.data('name');\n\t\t\telement.find('.js-filter__item__val:checked').each(function () {\n\t\t\t\tfilters.push($(this).val());\n\t\t\t});\n\t\t\tif (name) {\n\t\t\t\tparams[name] = filters;\n\t\t\t}\n\t\t});\n\t\tsideBar.find('.js-calendar__filter__select').each((_, e) => {\n\t\t\tlet element = $(e);\n\t\t\tlet name = element.attr('name');\n\t\t\tlet cacheName = element.data('cache');\n\t\t\tif (name) {\n\t\t\t\tparams[name] = cacheName && app.moduleCacheGet(cacheName) ? app.moduleCacheGet(cacheName) : element.val();\n\t\t\t\tparams.emptyFilters = !params.emptyFilters && params[name].length === 0;\n\t\t\t}\n\t\t});\n\t\treturn params;\n\t}\n\t/**\n\t * Converts the date format.\n\t * @param {object} date\n\t * @param {string} type\n\t * @returns {string}\n\t */\n\tformatDate(date, type) {\n\t\tswitch (type) {\n\t\t\tcase 'month':\n\t\t\t\treturn Calendar_Js.monthFormat[CONFIG.dateFormat]\n\t\t\t\t\t.replace('YYYY', date['year'])\n\t\t\t\t\t.replace('MMMM', App.Fields.Date.fullMonthsTranslated[date['month']]);\n\t\t\tcase 'week':\n\t\t\t\treturn CONFIG.dateFormat\n\t\t\t\t\t.replace('yyyy', date['year'])\n\t\t\t\t\t.replace('mm', App.Fields.Date.monthsTranslated[date['month']])\n\t\t\t\t\t.replace('dd', date['day'] + ' - ' + (date['day'] + 7));\n\t\t\tcase 'day':\n\t\t\t\treturn CONFIG.dateFormat\n\t\t\t\t\t.replace('yyyy', date['year'])\n\t\t\t\t\t.replace('mm', App.Fields.Date.monthsTranslated[date['month']])\n\t\t\t\t\t.replace('dd', date['day']);\n\t\t}\n\t}\n\t/**\n\t * Update calendar's event.\n\t * @param {Object} info\n\t */\n\tupdateEvent(info) {\n\t\tconst progressInstance = jQuery.progressIndicator({ blockInfo: { enabled: true } });\n\t\tAppConnector.request({\n\t\t\tmodule: this.module ? this.module : CONFIG.module,\n\t\t\taction: 'Calendar',\n\t\t\tmode: 'updateEvent',\n\t\t\tid: info.event.id,\n\t\t\tstart: App.Fields.DateTime.dateToUserFormat(info.event.start),\n\t\t\tend: App.Fields.DateTime.dateToUserFormat(info.event.end),\n\t\t\tallDay: info.event.allDay\n\t\t})\n\t\t\t.done(function (response) {\n\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\tif (!response['result']) {\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_NO_EDIT_PERMISSION'),\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t});\n\t\t\t\t\tinfo.revert();\n\t\t\t\t} else {\n\t\t\t\t\twindow.popoverCache = {};\n\t\t\t\t}\n\t\t\t})\n\t\t\t.fail(function () {\n\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\tapp.showNotify({\n\t\t\t\t\ttext: app.vtranslate('JS_NO_EDIT_PERMISSION'),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t\tinfo.revert();\n\t\t\t});\n\t}\n\t/**\n\t * Render event.\n\t * @param {Object} arg\n\t * @returns {Object}\n\t */\n\teventRenderer(arg) {\n\t\tif (arg.event.display === 'background') {\n\t\t\treturn {\n\t\t\t\thtml: `<span class=\"${arg.event.extendedProps.icon} js-popover-icon mr-1\"></span>${arg.event._def.title}`\n\t\t\t};\n\t\t}\n\t}\n\t/**\n\t * Returns counted calendar height.\n\t * @returns {(number|string)}\n\t */\n\tsetCalendarHeight() {\n\t\tlet defaultHeightValue = 'auto';\n\t\tif ($(window).width() > 993) {\n\t\t\tlet calendarPadding;\n\t\t\tif (this.container.hasClass('js-modal-container')) {\n\t\t\t\tcalendarPadding = this.container.find('.js-modal-header').outerHeight(); // modal needs bigger padding to prevent modal's scrollbar\n\t\t\t} else {\n\t\t\t\tcalendarPadding = this.container.find('.js-contents-div').css('margin-left').replace('px', ''); //equals calendar padding bottom to left margin\n\t\t\t}\n\t\t\tlet setCalendarH = () => {\n\t\t\t\treturn (\n\t\t\t\t\t$(window).height() -\n\t\t\t\t\tthis.container.find('.js-calendar__container').offset().top -\n\t\t\t\t\t$('.js-footer').height() -\n\t\t\t\t\tcalendarPadding\n\t\t\t\t);\n\t\t\t};\n\t\t\tdefaultHeightValue = setCalendarH();\n\t\t\tnew ResizeSensor(this.container.find('.contentsDiv'), () => {\n\t\t\t\tlet currentHeight = setCalendarH();\n\t\t\t\tif (currentHeight !== defaultHeightValue) {\n\t\t\t\t\tthis.fullCalendar.setOption('height', currentHeight);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn defaultHeightValue;\n\t}\n\t/**\n\t * Set calendar options from browser history.\n\t * @returns {object}\n\t */\n\tsetBrowserHistoryOptions() {\n\t\tconst historyParams = app.getMainParams('historyParams', true);\n\t\tlet options = {};\n\t\tif (historyParams && (historyParams.length || Object.keys(historyParams).length)) {\n\t\t\tlet s = new Date(historyParams.start);\n\t\t\tlet e = new Date(historyParams.end);\n\t\t\tthis.browserHistoryOptions = {\n\t\t\t\tinitialView: historyParams.viewType,\n\t\t\t\tinitialDate: App.Fields.Date.dateToDbFormat(new Date(e - (e - s) / 2)),\n\t\t\t\thiddenDays: historyParams.hiddenDays.split(',').map((x) => {\n\t\t\t\t\tlet parsedValue = parseInt(x);\n\t\t\t\t\treturn isNaN(parsedValue) ? '' : parsedValue;\n\t\t\t\t})\n\t\t\t};\n\t\t\toptions = {\n\t\t\t\tstart: historyParams.start,\n\t\t\t\tend: historyParams.end,\n\t\t\t\ttime: historyParams.time,\n\t\t\t\tuser: historyParams.user,\n\t\t\t\tcvid: historyParams.cvid\n\t\t\t};\n\t\t\tObject.keys(options).forEach((key) => options[key] === 'undefined' && delete options[key]);\n\t\t\tObject.keys(this.browserHistoryOptions).forEach(\n\t\t\t\t(key) => this.browserHistoryOptions[key] === 'undefined' && delete this.browserHistoryOptions[key]\n\t\t\t);\n\t\t\tapp.moduleCacheSet('browserHistoryEvent', false);\n\t\t\tif (historyParams.cvid && historyParams.cvid !== 'undefined') {\n\t\t\t\tapp.moduleCacheSet('CurrentCvId', historyParams.cvid);\n\t\t\t}\n\t\t\tapp.setMainParams('showType', options.time);\n\t\t\tapp.setMainParams('usersId', options.user);\n\t\t\tapp.setMainParams('defaultView', this.browserHistoryOptions);\n\t\t}\n\t\twindow.addEventListener(\n\t\t\t'popstate',\n\t\t\tfunction () {\n\t\t\t\tapp.moduleCacheSet('browserHistoryEvent', true);\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\t\treturn options;\n\t}\n\t/**\n\t * Register filters\n\t */\n\tregisterFilters() {\n\t\tconst self = this;\n\t\tlet sideBar = self.getSidebarView();\n\t\tif (!sideBar || sideBar.length <= 0) {\n\t\t\treturn;\n\t\t}\n\t\tsideBar.find('.js-sidebar-filter-container').each((_, row) => {\n\t\t\tlet formContainer = $(row);\n\t\t\tself.registerUsersChange(formContainer);\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(formContainer.find('select'));\n\t\t\tapp.showNewScrollbar(formContainer, {\n\t\t\t\tsuppressScrollX: true\n\t\t\t});\n\t\t\tself.registerFilterForm(formContainer);\n\t\t});\n\t\tself.registerSelectAll(sideBar);\n\t\tif (app.moduleCacheGet('CurrentCvId') !== null) {\n\t\t\tthis.container\n\t\t\t\t.find('.js-calendar__extended-filter-tab [data-cvid=\"' + app.moduleCacheGet('CurrentCvId') + '\"] a')\n\t\t\t\t.addClass('active');\n\t\t}\n\t}\n\t/**\n\t * Register filter for users and groups\n\t * @param {jQuery} container\n\t */\n\tregisterFilterForm(container) {\n\t\tconst self = this;\n\t\tif (container.find('.js-filter__search').length) {\n\t\t\tcontainer.find('.js-filter__search').on('keyup', this.findElementOnList.bind(self));\n\t\t}\n\t\tcontainer.find('.js-calendar__filter__select, .filterField').each((_, e) => {\n\t\t\tlet element = $(e);\n\t\t\tlet name = element.data('cache');\n\t\t\tlet cachedValue = app.moduleCacheGet(name);\n\t\t\tif (element.length > 0 && cachedValue !== undefined) {\n\t\t\t\tif (element.prop('tagName') == 'SELECT') {\n\t\t\t\t\telement.val(cachedValue);\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\tname &&\n\t\t\t\telement.length > 0 &&\n\t\t\t\tcachedValue === undefined &&\n\t\t\t\t!element.find(':selected').length &&\n\t\t\t\telement.data('selected') !== 0\n\t\t\t) {\n\t\t\t\tlet allOptions = [];\n\t\t\t\telement.find('option').each((i, option) => {\n\t\t\t\t\tallOptions.push($(option).val());\n\t\t\t\t});\n\t\t\t\telement.val(allOptions);\n\t\t\t\tapp.moduleCacheSet(name, cachedValue);\n\t\t\t}\n\t\t\telement.off('change');\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(element);\n\t\t\telement.on('change', (e) => {\n\t\t\t\tlet item = $(e.currentTarget);\n\t\t\t\tlet value = item.val();\n\t\t\t\tif (value == null) {\n\t\t\t\t\tvalue = '';\n\t\t\t\t}\n\t\t\t\tif (item.attr('type') == 'checkbox') {\n\t\t\t\t\tvalue = element.is(':checked');\n\t\t\t\t}\n\t\t\t\tapp.moduleCacheSet(item.data('cache'), value);\n\t\t\t\tself.reloadCalendarData();\n\t\t\t});\n\t\t});\n\t\tcontainer\n\t\t\t.find('.js-filter__container_checkbox_list .js-filter__item__val')\n\t\t\t.off('change')\n\t\t\t.on('change', (e) => {\n\t\t\t\tself.reloadCalendarData();\n\t\t\t});\n\t}\n\t/**\n\t * Find element on list (user, group)\n\t * @param {jQuery.Event} e\n\t */\n\tfindElementOnList(e) {\n\t\tconst target = $(e.target),\n\t\t\tvalue = target.val().toLowerCase(),\n\t\t\tcontainer = target.closest('.js-filter__container');\n\t\tcontainer.find('.js-filter__item__value').filter(function () {\n\t\t\tlet item = $(this).closest('.js-filter__item__container');\n\t\t\tif ($(this).text().trim().toLowerCase().indexOf(value) > -1) {\n\t\t\t\titem.removeClass('d-none');\n\t\t\t} else {\n\t\t\t\titem.addClass('d-none');\n\t\t\t}\n\t\t});\n\t}\n\t/**\n\t * Register users change\n\t * @param {jQuery} formContainer\n\t */\n\tregisterUsersChange(formContainer) {\n\t\tformContainer.find('.js-input-user-owner-id-ajax, .js-input-user-owner-id').on('change', () => {\n\t\t\tthis.reloadCalendarData();\n\t\t});\n\t}\n\t/**\n\t * Register change on select all checkbox\n\t * @param {jQuery} formContainer\n\t */\n\tregisterSelectAll(formContainer) {\n\t\tformContainer.find('.js-select-all').on('change', (e) => {\n\t\t\tlet checkboxSelectAll = $(e.currentTarget);\n\t\t\tlet checkboxes = formContainer.find('.js-input-user-owner-id-ajax, .js-input-user-owner-id');\n\t\t\tif (checkboxSelectAll.is(':checked')) {\n\t\t\t\tcheckboxes.prop('checked', true);\n\t\t\t} else {\n\t\t\t\tcheckboxes.prop('checked', false);\n\t\t\t\tformContainer.find('#ownerId' + CONFIG.userId).prop('checked', true);\n\t\t\t}\n\t\t\tself.reloadCalendarData();\n\t\t});\n\t}\n\t/**\n\t * Register sidebar events.\n\t */\n\tregisterSidebarEvents() {\n\t\t$('.bodyContents').on('Vtiger.Widget.Load.undefined', () => {\n\t\t\tthis.registerSelect2Event();\n\t\t});\n\t}\n\t/**\n\t * Get sidebar view panel\n\t * @returns {jQuery}\n\t */\n\tgetSidebarView() {\n\t\tif (!this.sidebarView || !this.sidebarView.length) {\n\t\t\tthis.sidebarView = this.container.find('.js-calendar-right-panel');\n\t\t}\n\t\treturn this.sidebarView;\n\t}\n\t/**\n\t * Get current cv id\n\t * @returns {int}\n\t */\n\tgetCurrentCvId() {\n\t\tlet tab = $('.js-calendar__container .js-calendar__extended-filter-tab');\n\t\tif (tab.length === 0) {\n\t\t\ttab = $('.js-calendar__header-buttons .js-calendar__extended-filter-tab');\n\t\t}\n\t\treturn tab.find('.active').parent().data('cvid');\n\t}\n\t/**\n\t * Register select2 event.\n\t */\n\tregisterSelect2Event() {\n\t\tconst self = this;\n\t\t$('.siteBarRight .js-calendar__filter__select').each(function () {\n\t\t\tlet element = $(this);\n\t\t\tlet name = element.data('cache');\n\t\t\tlet cachedValue = app.moduleCacheGet(name);\n\t\t\tif (element.length > 0 && cachedValue !== undefined) {\n\t\t\t\tif (element.prop('tagName') == 'SELECT') {\n\t\t\t\t\telement.val(cachedValue);\n\t\t\t\t}\n\t\t\t} else if (element.length > 0 && cachedValue === undefined && !element.find(':selected').length) {\n\t\t\t\tlet allOptions = [];\n\t\t\t\telement.find('option').each((_i, option) => {\n\t\t\t\t\tallOptions.push($(option).val());\n\t\t\t\t});\n\t\t\t\telement.val(allOptions);\n\t\t\t\tapp.moduleCacheSet(name, cachedValue);\n\t\t\t}\n\t\t});\n\t\tlet selectsElements = $('.siteBarRight .select2, .siteBarRight .filterField');\n\t\tselectsElements.off('change');\n\t\tApp.Fields.Picklist.showSelect2ElementView(selectsElements);\n\t\tselectsElements.on('change', function () {\n\t\t\tlet element = $(this);\n\t\t\tlet value = element.val();\n\t\t\tif (value == null) {\n\t\t\t\tvalue = '';\n\t\t\t}\n\t\t\tif (element.attr('type') == 'checkbox') {\n\t\t\t\tvalue = element.is(':checked');\n\t\t\t}\n\t\t\tapp.moduleCacheSet(element.data('cache'), value);\n\t\t\tself.reloadCalendarData();\n\t\t});\n\t}\n\t/**\n\t * Register button select all.\n\t */\n\tregisterButtonSelectAll() {\n\t\t$('.selectAllBtn').on('click', function () {\n\t\t\tconst selectAllLabel = $(this).find('.selectAll'),\n\t\t\t\tdeselectAllLabel = $(this).find('.deselectAll');\n\t\t\tif (selectAllLabel.hasClass('d-none')) {\n\t\t\t\tselectAllLabel.removeClass('d-none');\n\t\t\t\tdeselectAllLabel.addClass('d-none');\n\t\t\t\t$(this).closest('.quickWidget').find('select option').prop('selected', false);\n\t\t\t} else {\n\t\t\t\t$(this).closest('.quickWidget').find('select option').prop('selected', true);\n\t\t\t\tdeselectAllLabel.removeClass('d-none');\n\t\t\t\tselectAllLabel.addClass('d-none');\n\t\t\t}\n\t\t\t$(this).closest('.quickWidget').find('select').trigger('change');\n\t\t});\n\t}\n\t/**\n\t * Register add button.\n\t */\n\tregisterAddButton() {\n\t\t$('.js-add').on('click', () => {\n\t\t\tthis.getCalendarCreateView().done((data) => {\n\t\t\t\tApp.Components.QuickCreate.showModal(data, {\n\t\t\t\t\tcallbackFunction: () => {\n\t\t\t\t\t\tthis.reloadCalendarData();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\t/**\n\t * Get calendar create view.\n\t * @returns {promise}\n\t */\n\tgetCalendarCreateView() {\n\t\tconst self = this,\n\t\t\taDeferred = jQuery.Deferred();\n\t\tif (this.calendarCreateView !== false) {\n\t\t\taDeferred.resolve(this.calendarCreateView);\n\t\t\treturn aDeferred.promise();\n\t\t}\n\t\tlet progressInstance = jQuery.progressIndicator();\n\t\tthis.loadCalendarCreateView()\n\t\t\t.done(function (data) {\n\t\t\t\tprogressInstance.hide();\n\t\t\t\tself.calendarCreateView = data;\n\t\t\t\taDeferred.resolve(data);\n\t\t\t})\n\t\t\t.fail(function () {\n\t\t\t\tprogressInstance.hide();\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t}\n\t/**\n\t * Load calendar create view.\n\t * @returns {promise}\n\t */\n\tloadCalendarCreateView() {\n\t\tconst aDeferred = jQuery.Deferred(),\n\t\t\tmoduleName = app.getModuleName();\n\t\tApp.Components.QuickCreate.getForm('index.php?module=' + moduleName + '&view=QuickCreateAjax', moduleName)\n\t\t\t.done(function (data) {\n\t\t\t\taDeferred.resolve(data);\n\t\t\t})\n\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t}\n\t/**\n\t * Function invokes by FullCalendar, sets selected days in form\n\t * @param info\n\t */\n\tselectDays(info) {\n\t\tthis.getCalendarCreateView().done((data) => {\n\t\t\tApp.Components.QuickCreate.showModal(data, {\n\t\t\t\tcallbackFunction: () => {\n\t\t\t\t\tself.reloadCalendarData();\n\t\t\t\t},\n\t\t\t\tcallbackPostShown: (modal) => {\n\t\t\t\t\tthis.selectCallbackCreateModal(modal, info);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\t/**\n\t * Callback after shown create modal\n\t * @param {jQuery} modal\n\t */\n\tselectCallbackCreateModal(modal, info) {\n\t\tlet startDate = info.start,\n\t\t\tendDate = info.end;\n\t\tif (info['allDay']) {\n\t\t\tendDate.setDate(endDate.getDate() - 1);\n\t\t}\n\t\tif (info['allDay']) {\n\t\t\tlet startDateSplitted = this.startHour.split(':');\n\t\t\tlet endDateSplitted = this.endHour.split(':');\n\t\t\tstartDate.setHours(startDateSplitted[0], startDateSplitted[1]);\n\t\t\tendDate.setHours(endDateSplitted[0], endDateSplitted[1]);\n\t\t\tif (startDate.toDateString() === endDate.toDateString()) {\n\t\t\t\tlet activityType = modal.find('[name=\"activitytype\"]').val();\n\t\t\t\tlet activityDurations = JSON.parse(modal.find('[name=\"defaultOtherEventDuration\"]').val());\n\t\t\t\tlet minutes = 60;\n\t\t\t\tfor (let i in activityDurations) {\n\t\t\t\t\tif (activityDurations[i].activitytype === activityType) {\n\t\t\t\t\t\tminutes = parseInt(activityDurations[i].duration);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (minutes) {\n\t\t\t\t\tendDate.setMinutes(endDate.getMinutes() + minutes);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tlet dateFormat = CONFIG.dateFormat;\n\t\tlet timeFormat = CONFIG.hourFormat;\n\t\tlet dateField = modal.find('[name=\"date_start\"]');\n\t\tif (dateField.length) {\n\t\t\tdateFormat = dateField.data('dateFormat');\n\t\t}\n\t\tlet timeField = modal.find('[name=\"time_start\"]');\n\t\tif (timeField.length) {\n\t\t\ttimeFormat = timeField.data('format');\n\t\t}\n\t\tlet defaultTimeFormat = '';\n\t\tif (timeFormat == 24) {\n\t\t\tdefaultTimeFormat = 'HH:mm';\n\t\t} else {\n\t\t\tdefaultTimeFormat = 'hh:mm A';\n\t\t}\n\t\tmodal.find('[name=\"date_start\"]').val(App.Fields.Date.dateToUserFormat(startDate, dateFormat));\n\t\tmodal.find('[name=\"due_date\"]').val(App.Fields.Date.dateToUserFormat(endDate, dateFormat));\n\t\tif (modal.find('.js-autofill').prop('checked') === true) {\n\t\t\tCalendar_Edit_Js.getInstance().getFreeTime(modal);\n\t\t} else {\n\t\t\tmodal.find('[name=\"time_start\"]').val(moment(startDate).format(defaultTimeFormat));\n\t\t\tmodal.find('[name=\"time_end\"]').val(moment(endDate).format(defaultTimeFormat));\n\t\t}\n\t}\n\t/**\n\t * Register events.\n\t */\n\tregisterEvents() {\n\t\tthis.registerFilters();\n\t\tthis.registerSidebarEvents();\n\t\tthis.renderCalendar();\n\t\tthis.registerButtonSelectAll();\n\t\tthis.registerAddButton();\n\t}\n};\n"],"names":["window","Calendar_Js","container","$","readonly","browserHistory","calendarCreateView","calendarView","find","eventCreate","app","getMainParams","eventEdit","sidebarView","length","startHour","endHour","browserHistoryOptions","browserHistoryConfig","setBrowserHistoryOptions","calendarOptions","setCalendarOptions","eventTypeKeyName","module","getModuleName","event","on","reloadCalendarData","Object","assign","setCalendarBasicOptions","setCalendarAdvancedOptions","setCalendarModuleOptions","eventLimit","userView","defaultView","moduleCacheGet","userTimeFormat","CONFIG","hourFormat","parseInt","hour","minute","hour12","meridiem","options","eventTimeFormat","slotLabelFormat","initialView","viewsNamesMap","forceEventDuration","defaultTimedEventDuration","dayMaxEvents","selectMirror","scrollTime","s","Date","e","initialDate","App","Fields","dateToDbFormat","setCalendarMinimalOptions","hiddenDays","navLinks","firstDay","firstDayOfWeekNo","selectable","moreLinkContent","vtranslate","allDayText","noEventsText","buttonText","today","year","week","month","day","dayGridMonth","dayGridWeek","listWeek","dayGridDay","timeGridDay","list","buttonHints","prev","next","viewHint","navLinkHint","_dateStr","zonedDate","dateToUserFormat","dayHeaderContent","arg","width","daysTranslated","date","getDay","fullDaysTranslated","self","editable","headerToolbar","left","center","right","allDaySlot","views","basic","titleFormat","args","formatDate","timeGridWeek","html","basicDay","type","eventDrop","updateEvent","eventResize","datesSet","dateInfo","trigger","loadCalendarData","eventContent","eventRenderer","height","setCalendarHeight","fullCalendar","FullCalendar","Calendar","get","render","registerViewRenderEvents","defaultParams","getDefaultParams","removeAllEvents","emptyFilters","progressInstance","progressIndicator","blockInfo","enabled","AppConnector","request","done","events","addEventSource","result","mode","users","userId","sideBar","getSidebarView","filters","params","action","start","view","activeStart","end","activeEnd","user","cvid","getCurrentCvId","each","name","value","element","attr","val","prop","push","_","data","cacheName","monthFormat","dateFormat","replace","fullMonthsTranslated","monthsTranslated","info","jQuery","id","DateTime","allDay","response","popoverCache","showNotify","text","revert","fail","display","extendedProps","icon","_def","title","defaultHeightValue","calendarPadding","hasClass","outerHeight","css","setCalendarH","offset","top","ResizeSensor","currentHeight","setOption","historyParams","keys","viewType","split","map","x","parsedValue","isNaN","time","forEach","key","moduleCacheSet","setMainParams","addEventListener","row","formContainer","registerUsersChange","Picklist","showSelect2ElementView","showNewScrollbar","suppressScrollX","registerFilterForm","registerSelectAll","addClass","findElementOnList","bind","cachedValue","allOptions","i","option","off","item","currentTarget","is","target","toLowerCase","closest","filter","trim","indexOf","removeClass","checkboxSelectAll","checkboxes","registerSelect2Event","tab","parent","_i","selectsElements","selectAllLabel","deselectAllLabel","getCalendarCreateView","Components","QuickCreate","showModal","callbackFunction","aDeferred","Deferred","resolve","promise","loadCalendarCreateView","hide","moduleName","getForm","textStatus","errorThrown","reject","callbackPostShown","modal","selectCallbackCreateModal","startDate","endDate","setDate","getDate","startDateSplitted","endDateSplitted","setHours","toDateString","activityType","activityDurations","JSON","parse","minutes","activitytype","duration","setMinutes","getMinutes","timeFormat","dateField","timeField","defaultTimeFormat","Calendar_Edit_Js","getInstance","getFreeTime","moment","format","registerFilters","registerSidebarEvents","renderCalendar","registerButtonSelectAll","registerAddButton","basicWeek"],"mappings":"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"}