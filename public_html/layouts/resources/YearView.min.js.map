{"version":3,"file":"YearView.min.js","sources":["YearView.js"],"sourcesContent":["// /* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n// 'use strict';\n// var FC = $.fullCalendar, // a reference to FullCalendar's root namespace\n// \tView = FC.View; // the class that all views must inherit from\n\n// /**\n//  * Creates fullcalendar's View year subclass\n//  */\n\n// FC.views.year = View.extend({\n// \tcalendarView: false,\n// \trenderHtml: function (year) {\n// \t\tlet col2Breakpoint = 'col-xxl-2';\n// \t\tif ($('#switchingDays').val() === 'all') {\n// \t\t\tcol2Breakpoint = 'col-xxxl-2';\n// \t\t}\n// \t\treturn `\n// \t\t\t<div class=\"h-100 fc-year\">\n// \t\t\t\t<div class=\"fc-year__container row no-gutters\">\n// \t\t\t\t\t<div class=\"fc-january fc-year__month col-sm-6 col-lg-4 col-xl-3 ${col2Breakpoint}\" data-date=\"${year}-01-01\"></div>\n// \t\t\t\t\t<div class=\"fc-february fc-year__month col-sm-6 col-lg-4 col-xl-3 ${col2Breakpoint}\" data-date=\"${year}-02-01\"></div>\n// \t\t\t\t\t<div class=\"fc-march fc-year__month col-sm-6 col-lg-4 col-xl-3 ${col2Breakpoint}\" data-date=\"${year}-03-01\"></div>\n// \t\t\t\t\t<div class=\"fc-april fc-year__month col-sm-6 col-lg-4 col-xl-3 ${col2Breakpoint}\" data-date=\"${year}-04-01\"></div>\n// \t\t\t\t\t<div class=\"fc-may fc-year__month col-sm-6 col-lg-4 col-xl-3 ${col2Breakpoint}\" data-date=\"${year}-05-01\"></div>\n// \t\t\t\t\t<div class=\"fc-june fc-year__month col-sm-6 col-lg-4 col-xl-3 ${col2Breakpoint}\" data-date=\"${year}-06-01\"></div>\n// \t\t\t\t\t<div class=\"fc-july fc-year__month col-sm-6 col-lg-4 col-xl-3 ${col2Breakpoint}\" data-date=\"${year}-07-01\"></div>\n// \t\t\t\t\t<div class=\"fc-august fc-year__month col-sm-6 col-lg-4 col-xl-3 ${col2Breakpoint}\" data-date=\"${year}-08-01\"></div>\n// \t\t\t\t\t<div class=\"fc-september fc-year__month col-sm-6 col-lg-4 col-xl-3 ${col2Breakpoint}\" data-date=\"${year}-09-01\"></div>\n// \t\t\t\t\t<div class=\"fc-october fc-year__month col-sm-6 col-lg-4 col-xl-3 ${col2Breakpoint}\" data-date=\"${year}-10-01\"></div>\n// \t\t\t\t\t<div class=\"fc-november fc-year__month col-sm-6 col-lg-4 col-xl-3 ${col2Breakpoint}\" data-date=\"${year}-11-01\"></div>\n// \t\t\t\t\t<div class=\"fc-december fc-year__month col-sm-6 col-lg-4 col-xl-3 ${col2Breakpoint}\" data-date=\"${year}-12-01\"></div>\n// \t\t\t\t</div>\n// \t\t\t</div>\n// \t\t`;\n// \t},\n// \tloadMonthData: function (calendar, events) {\n// \t\tconst thisInstance = this;\n// \t\tlet height = calendar.find('.fc-bg :first').height() - calendar.find('.fc-day-number').height() - 10,\n// \t\t\twidth = calendar.find('.fc-day-number').width() / 2 - 10,\n// \t\t\ti;\n// \t\tfor (i in events.result) {\n// \t\t\tevents.result[i]['width'] = width;\n// \t\t\tevents.result[i]['height'] = height;\n// \t\t}\n// \t\tcalendar.fullCalendar('addEventSource', events.result);\n// \t\tcalendar.find('.js-show-day').on('click', function () {\n// \t\t\tlet date = moment($(this).data('date')).format();\n// \t\t\tthisInstance.getCalendarView().fullCalendar('changeView', 'timeGridDay', date);\n// \t\t\t$('.js-sub-record .active').click();\n// \t\t});\n// \t\tcalendar.find('.fc-center').on('click', function () {\n// \t\t\tlet date = moment($(this).closest('[data-date]').data('date')).format();\n// \t\t\tthisInstance.getCalendarView().fullCalendar('changeView', 'month', date);\n// \t\t\t$('.js-sub-record .active').click();\n// \t\t});\n// \t},\n// \tappendWeekButton() {\n// \t\t$('.fc-row.fc-week.fc-widget-content').each(function () {\n// \t\t\tlet date = $(this).find('.fc-day-top').first().data('date');\n// \t\t\tif (date !== undefined) {\n// \t\t\t\tlet actualWeek = moment(date).format('WW');\n// \t\t\t\t$(this).prepend(\n// \t\t\t\t\t`<div class=\"js-show-week js-popover-tooltip fc-year__show-week-btn\" data-toggle=\"popover\" data-date=\"${date}\" data-content=\"${app.vtranslate(\n// \t\t\t\t\t\t'JS_WEEK'\n// \t\t\t\t\t)} ${actualWeek}\" role=\"tooltip\" data-js=\"click | popover\">${actualWeek}</div>`\n// \t\t\t\t);\n// \t\t\t}\n// \t\t});\n// \t\tthis.getCalendarView()\n// \t\t\t.find('.js-show-week')\n// \t\t\t.on('click', (e) => {\n// \t\t\t\t$(e.currentTarget).popover('hide');\n// \t\t\t\tlet date = moment($(e.currentTarget).data('date')).format();\n// \t\t\t\tthis.getCalendarView().fullCalendar('changeView', 'timeGridWeek', date);\n// \t\t\t\t$('.js-sub-record .active').click();\n// \t\t\t});\n// \t},\n// \trender: function () {\n// \t\tconst self = this;\n// \t\tlet calendar = self.getCalendarView().fullCalendar('getCalendar'),\n// \t\t\tdate = calendar.getDate().year(),\n// \t\t\tyearView = this.el.html(this.renderHtml(date)),\n// \t\t\tuser = JSON.stringify(this.getSelectedUsersCalendar()),\n// \t\t\tprogressInstance = $.progressIndicator({ blockInfo: { enabled: true } }),\n// \t\t\tcvid = this.getCurrentCvId();\n// \t\tlet dateFormat = CONFIG.dateFormat.toUpperCase();\n// \t\tthis.clearFilterButton(user, cvid);\n// \t\tlet options = {\n// \t\t\tmodule: this.module,\n// \t\t\taction: 'Calendar',\n// \t\t\tmode: 'getEventsYear',\n// \t\t\tstart: moment(date + '-01-01').format(dateFormat),\n// \t\t\tend: moment(date + '-12-31').format(dateFormat),\n// \t\t\tuser: user,\n// \t\t\tyearView: true,\n// \t\t\ttime: app.getMainParams('showType'),\n// \t\t\tcvid: cvid,\n// \t\t\thistoryUrl: `index.php?module=${this.module}&view=CalendarExtended&history=true&viewType=${\n// \t\t\t\tcalendar.view.type\n// \t\t\t}&start=${moment(date + '-01-01').format(dateFormat)}&end=${moment(date + '-12-31').format(\n// \t\t\t\tdateFormat\n// \t\t\t)}&user=${user}&time=${app.getMainParams('showType')}&cvid=${cvid}&hiddenDays=${calendar.view.options.hiddenDays}`\n// \t\t};\n// \t\toptions = $.extend(this.getDefaultParams(), options);\n// \t\tlet connectorMethod = window['AppConnector']['request'];\n// \t\tif (this.browserHistory && window.calendarLoaded) {\n// \t\t\tconnectorMethod = window['AppConnector']['requestPjax'];\n// \t\t}\n// \t\tif (this.browserHistoryConfig && Object.keys(this.browserHistoryConfig).length && window.calendarLoaded) {\n// \t\t\toptions = Object.assign(options, {\n// \t\t\t\tstart: moment(this.browserHistoryConfig.start).format(dateFormat),\n// \t\t\t\tend: moment(this.browserHistoryConfig.end).format(dateFormat),\n// \t\t\t\tuser: this.browserHistoryConfig.user,\n// \t\t\t\ttime: this.browserHistoryConfig.time,\n// \t\t\t\tcvid: this.browserHistoryConfig.cvid\n// \t\t\t});\n// \t\t\tconnectorMethod = window['AppConnector']['request'];\n// \t\t\tapp.setMainParams('showType', this.browserHistoryConfig.time);\n// \t\t\tapp.setMainParams('usersId', this.browserHistoryConfig.user);\n// \t\t}\n// \t\tlet className = this.baseInstance.constructor.name;\n// \t\tconnectorMethod(options).done(function (events) {\n// \t\t\tyearView.find('.fc-year__month').each(function (i) {\n// \t\t\t\tlet calendarInstance = new window[className](self.container, self.readonly);\n// \t\t\t\tlet basicOptions = calendarInstance.setCalendarMinimalOptions(),\n// \t\t\t\t\tmonthOptions = {\n// \t\t\t\t\t\tdefaultView: 'month',\n// \t\t\t\t\t\ttitleFormat: 'MMMM',\n// \t\t\t\t\t\theader: { center: 'title', left: false, right: false },\n// \t\t\t\t\t\theight: 'auto',\n// \t\t\t\t\t\tselect: function (start, end) {\n// \t\t\t\t\t\t\tself.selectDays(start, end);\n// \t\t\t\t\t\t},\n// \t\t\t\t\t\thiddenDays: calendar.view.options.hiddenDays,\n// \t\t\t\t\t\tshowNonCurrentDates: false,\n// \t\t\t\t\t\tdefaultDate: moment(calendar.getDate().year() + '-' + (i + 1), 'YYYY-MM-DD'),\n// \t\t\t\t\t\teventRender: function (event, element) {\n// \t\t\t\t\t\t\tif (event.rendering === 'background') {\n// \t\t\t\t\t\t\t\telement.append(\n// \t\t\t\t\t\t\t\t\t`<span class=\"js-popover-tooltip\" data-content=\"${event.title}\" data-toggle=\"popover\"><span class=\"${event.icon}\"></span></span>`\n// \t\t\t\t\t\t\t\t);\n// \t\t\t\t\t\t\t\treturn element;\n// \t\t\t\t\t\t\t}\n// \t\t\t\t\t\t\tevent.countShow = '99+';\n// \t\t\t\t\t\t\tif (event.count < 100) {\n// \t\t\t\t\t\t\t\tevent.countShow = event.count;\n// \t\t\t\t\t\t\t}\n// \t\t\t\t\t\t\telement = `<div class=\"js-show-day cell-calendar u-cursor-pointer d-flex\" data-date=\"${event.date}\" data-js=\"click\">\n// \t\t\t\t\t\t\t<a class=\"u-z-index-100 fc-year__show-day-btn mx-auto\" href=\"#\" data-date=\"${event.date}\" title=\"${event.count}\">\n// \t\t\t\t\t\t\t\t  <span class=\"fc-year__show-day-btn__container\">\n// \t\t\t\t\t\t\t\t\t<span class=\"fas fa-calendar fa-lg\"></span>\n// \t\t\t\t\t\t\t\t\t<span class=\"fc-year__show-day-btn__text fa-inverse u-font-weight-700\">${event.countShow}</span>\n// \t\t\t\t\t\t\t\t  </span>\n// \t\t\t\t\t\t\t</a>\n// \t\t\t\t\t\t</div>`;\n// \t\t\t\t\t\t\treturn element;\n// \t\t\t\t\t\t}\n// \t\t\t\t\t};\n// \t\t\t\tself.loadMonthData($(this).fullCalendar($.extend(basicOptions, monthOptions)), events);\n// \t\t\t});\n// \t\t\tif (app.getMainParams('weekCount') === '1') {\n// \t\t\t\tself.appendWeekButton();\n// \t\t\t}\n// \t\t\tlet yearViewContainer = self.container.find('.fc-view-container').first();\n// \t\t\tyearViewContainer\n// \t\t\t\t.height($(window).height() - yearViewContainer.offset().top - $('.js-footer').height())\n// \t\t\t\t.addClass('u-overflow-y-auto u-overflow-x-hidden');\n// \t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n// \t\t});\n// \t\tthis.registerTodayButtonYearChange(calendar);\n// \t\tthis.registerViewRenderEvents(calendar.view);\n// \t\twindow.calendarLoaded = true;\n// \t},\n\n// \t/**\n// \t * Function extends today button functionality for year view\n// \t * @param {jQuery} calendar\n// \t */\n// \tregisterTodayButtonYearChange(calendar) {\n// \t\tif (calendar.currentDate.format('YYYY') === moment().format('YYYY')) {\n// \t\t\tcalendar.el.find('.fc-today-button').addClass('fc-state-disabled');\n// \t\t} else {\n// \t\t\tcalendar.el.find('.fc-today-button').removeClass('fc-state-disabled');\n// \t\t}\n// \t}\n// });\n"],"names":[],"mappings":";;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;"}