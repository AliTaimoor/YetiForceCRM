{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery(document).ready(function ($) {\n\t// enable/disable confirm button\n\t$('#status').on('change', function () {\n\t\t$('#confirm').attr('disabled', !this.checked);\n\t});\n});\nVtiger_Edit_Js(\n\t'Reservations_Edit_Js',\n\t{},\n\t{\n\t\tdifferenceDays: function () {\n\t\t\tlet firstDate = jQuery('input[name=\"date_start\"]');\n\t\t\tlet firstDateFormat = firstDate.data('date-format');\n\t\t\tlet firstDateValue = firstDate.val();\n\t\t\tlet secondDate = jQuery('input[name=\"due_date\"]');\n\t\t\tlet secondDateFormat = secondDate.data('date-format');\n\t\t\tlet secondDateValue = secondDate.val();\n\t\t\tlet firstTime = jQuery('input[name=\"time_start\"]');\n\t\t\tlet secondTime = jQuery('input[name=\"time_end\"]');\n\t\t\tif (firstTime.length) {\n\t\t\t\tfirstDateValue = firstDateValue + ' ' + firstTime.val();\n\t\t\t}\n\t\t\tif (secondTime.length) {\n\t\t\t\tsecondDateValue = secondDateValue + ' ' + secondTime.val();\n\t\t\t}\n\t\t\tlet firstDateInstance = Vtiger_Helper_Js.getDateInstance(firstDateValue, firstDateFormat);\n\t\t\tlet secondDateInstance = Vtiger_Helper_Js.getDateInstance(secondDateValue, secondDateFormat);\n\n\t\t\tlet timeBetweenDates = secondDateInstance - firstDateInstance;\n\t\t\tif (timeBetweenDates >= 0) {\n\t\t\t\treturn timeBetweenDates;\n\t\t\t}\n\t\t\treturn 'Error';\n\t\t},\n\n\t\t/**\n\t\t * Function to register recordpresave event\n\t\t */\n\t\tregisterRecordPreSaveEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar form = this.getForm();\n\n\t\t\tform.on(Vtiger_Edit_Js.recordPreSave, function (e, data) {\n\t\t\t\tvar sumeTime2 = thisInstance.differenceDays();\n\t\t\t\tif (sumeTime2 == 'Error') {\n\t\t\t\t\tvar parametry = {\n\t\t\t\t\t\ttext: app.vtranslate('JS_DATE_SHOULD_BE_GREATER_THAN'),\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t};\n\t\t\t\t\tapp.showNotify(parametry);\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\tform.submit();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerRecordPreSaveEvent();\n\t\t}\n\t}\n);\n"],"names":["jQuery","document","ready","$","on","attr","checked","Vtiger_Edit_Js","differenceDays","firstDate","firstDateFormat","data","firstDateValue","val","secondDate","secondDateFormat","secondDateValue","firstTime","secondTime","length","firstDateInstance","Vtiger_Helper_Js","getDateInstance","secondDateInstance","timeBetweenDates","registerRecordPreSaveEvent","thisInstance","form","getForm","recordPreSave","sumeTime2","parametry","text","app","vtranslate","type","showNotify","submit","registerEvents","_super"],"mappings":";;AAGAA,MAAM,CAACC,QAAD,CAAN,CAAiBC,KAAjB,CAAuB,SAAUC,CAAV,CAAa;AAEnCA,CAAC,CAAC,SAAD,CAAD,CAAaC,EAAb,CAAgB,QAAhB,CAA0B,UAAY,CACrCD,CAAC,CAAC,UAAD,CAAD,CAAcE,IAAd,CAAmB,UAAnB,CAA+B,CAAC,KAAKC,OAArC,EACA,CAFD,EAGA,CALD,EAMAC,cAAc,CACb,sBADa,CAEb,EAFa,CAGb,CACCC,cAAc,CAAE,yBAAY,KACvBC,SAAS,CAAGT,MAAM,CAAC,4BAAD,CADK,CAEvBU,eAAe,CAAGD,SAAS,CAACE,IAAV,CAAe,aAAf,CAFK,CAGvBC,cAAc,CAAGH,SAAS,CAACI,GAAV,EAHM,CAIvBC,UAAU,CAAGd,MAAM,CAAC,0BAAD,CAJI,CAKvBe,gBAAgB,CAAGD,UAAU,CAACH,IAAX,CAAgB,aAAhB,CALI,CAMvBK,eAAe,CAAGF,UAAU,CAACD,GAAX,EANK,CAOvBI,SAAS,CAAGjB,MAAM,CAAC,4BAAD,CAPK,CAQvBkB,UAAU,CAAGlB,MAAM,CAAC,0BAAD,CARI,CASvBiB,SAAS,CAACE,MATa,GAU1BP,cAAc,CAAGA,cAAc,CAAG,GAAjB,CAAuBK,SAAS,CAACJ,GAAV,EAVd,EAYvBK,UAAU,CAACC,MAZY,GAa1BH,eAAe,CAAGA,eAAe,CAAG,GAAlB,CAAwBE,UAAU,CAACL,GAAX,EAbhB,MAevBO,iBAAiB,CAAGC,gBAAgB,CAACC,eAAjB,CAAiCV,cAAjC,CAAiDF,eAAjD,CAfG,CAgBvBa,kBAAkB,CAAGF,gBAAgB,CAACC,eAAjB,CAAiCN,eAAjC,CAAkDD,gBAAlD,CAhBE,CAkBvBS,gBAAgB,CAAGD,kBAAkB,CAAGH,iBAlBjB,SAmBvB,EAAAI,gBAnBuB,CAoBnBA,gBApBmB,CAsBpB,OACP,CAxBF;AA2BD;AACA,KACEC,0BAA0B,CAAE,qCAAY,KACnCC,YAAY,CAAG,IADoB,CAEnCC,IAAI,CAAG,KAAKC,OAAL,EAF4B,CAIvCD,IAAI,CAACvB,EAAL,CAAQG,cAAc,CAACsB,aAAvB,CAAsC,UAAmB,CACxD,IAAIC,SAAS,CAAGJ,YAAY,CAAClB,cAAb,EAAhB,CACA,GAAiB,OAAb,EAAAsB,SAAJ,CAA0B,CACzB,IAAIC,SAAS,CAAG,CACfC,IAAI,CAAEC,GAAG,CAACC,UAAJ,CAAe,gCAAf,CADS,CAEfC,IAAI,CAAE,OAFS,CAAhB,CAKA,OADAF,GAAG,CAACG,UAAJ,CAAeL,SAAf,CACA,GACA,CACAJ,IAAI,CAACU,MAAL,GAED,CAZD,EAaA,CA9CF,CA+CCC,cAAc,CAAE,yBAAY,CAC3B,KAAKC,MAAL,EAD2B,CAE3B,KAAKd,0BAAL,GACA,CAlDF,CAHa;;"}