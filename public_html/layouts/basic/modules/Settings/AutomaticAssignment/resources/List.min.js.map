{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_List_Js(\n\t'Settings_AutomaticAssignment_List_Js',\n\t{\n\t\tchangeRecordState: function (recordId, state) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar message = app.vtranslate('JS_STATE_CONFIRMATION');\n\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message })\n\t\t\t\t.done(function (e) {\n\t\t\t\t\tapp.saveAjax('save', { active: state }, { record: recordId }).done(function (respons) {\n\t\t\t\t\t\tvar listInstance = Settings_AutomaticAssignment_List_Js.getInstance();\n\t\t\t\t\t\tlistInstance.getListViewRecords();\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\tapp.errorLog(error, err);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t}\n\t},\n\t{\n\t\tcontainer: false,\n\t\tregisterFilterChangeEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tjQuery('#moduleFilter').on('change', function (e) {\n\t\t\t\tjQuery('#pageNumber').val('1');\n\t\t\t\tjQuery('#pageToJump').val('1');\n\t\t\t\tjQuery('#orderBy').val('');\n\t\t\t\tjQuery('#sortOrder').val('');\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\tsourceModule: jQuery(e.currentTarget).val()\n\t\t\t\t};\n\t\t\t\t//Make the select all count as empty\n\t\t\t\tjQuery('#recordsCount').val('');\n\t\t\t\t//Make total number of pages as empty\n\t\t\t\tjQuery('#totalPageCount').text('');\n\t\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\t\tthisInstance.updatePagination();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tgetContainer: function () {\n\t\t\tif (this.container == false) {\n\t\t\t\tthis.container = jQuery('div.contentsDiv');\n\t\t\t}\n\t\t\treturn this.container;\n\t\t},\n\t\tregisterModalEvents: function (data, url) {\n\t\t\tvar form = data.find('form');\n\t\t\tvar submitButton = data.find('.submitButton');\n\t\t\tdata.find('[name=\"tabid\"]').on('change', function (e) {\n\t\t\t\tvar progress = jQuery.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tvar getFieldsUrl = url + '&tabid=' + element.val();\n\t\t\t\tAppConnector.request(getFieldsUrl)\n\t\t\t\t\t.done(function (fields) {\n\t\t\t\t\t\tdata.find('.fieldList').html(fields);\n\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('.fieldList select'));\n\t\t\t\t\t\tsubmitButton.removeClass('d-none');\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tapp.errorLog(textStatus, errorThrown);\n\t\t\t\t\t});\n\t\t\t});\n\t\t\tform.on('submit', function (e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tvar params = form.serializeFormData();\n\t\t\t\tapp.saveAjax('save', params).done(function (response) {\n\t\t\t\t\tvar id = response.result;\n\t\t\t\t\tif (id) {\n\t\t\t\t\t\tvar url = form.attr('action');\n\t\t\t\t\t\turl = url + '&record=' + id;\n\t\t\t\t\t\twindow.location.href = url;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tthis._super();\n\t\t\tthis.registerFilterChangeEvent();\n\t\t\tthis.getContainer()\n\t\t\t\t.find('.addRecord')\n\t\t\t\t.on('click', function (e) {\n\t\t\t\t\tvar button = jQuery(e.currentTarget);\n\t\t\t\t\tvar url = button.data('url');\n\t\t\t\t\tapp.showModalWindow(null, url, function (data) {\n\t\t\t\t\t\tthisInstance.registerModalEvents(data, url);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t}\n\t}\n);\n"],"names":["Settings_Vtiger_List_Js","changeRecordState","recordId","state","aDeferred","jQuery","Deferred","message","app","vtranslate","Vtiger_Helper_Js","showConfirmationBox","done","saveAjax","active","record","listInstance","Settings_AutomaticAssignment_List_Js","getInstance","getListViewRecords","fail","error","err","errorLog","promise","container","registerFilterChangeEvent","thisInstance","on","e","val","params","module","getModuleName","parent","getParentModuleName","sourceModule","currentTarget","text","updatePagination","getContainer","registerModalEvents","data","url","form","find","submitButton","progress","progressIndicator","position","blockInfo","enabled","element","getFieldsUrl","AppConnector","request","fields","html","App","Fields","Picklist","showSelect2ElementView","removeClass","mode","textStatus","errorThrown","preventDefault","serializeFormData","response","id","result","attr","window","location","href","registerEvents","_super","button","showModalWindow"],"mappings":"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"}