{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_List_Js(\n\t'Settings_MappedFields_List_Js',\n\t{},\n\t{\n\t\tgetListContainer: function () {\n\t\t\treturn jQuery('#listViewContainer');\n\t\t},\n\t\tregisterFilterChangeEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tjQuery('#moduleFilter').on('change', function (e) {\n\t\t\t\tjQuery('#pageNumber').val('1');\n\t\t\t\tjQuery('#pageToJump').val('1');\n\t\t\t\tjQuery('#orderBy').val('');\n\t\t\t\tjQuery('#sortOrder').val('');\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\tsourceModule: jQuery(e.currentTarget).val()\n\t\t\t\t};\n\t\t\t\t//Make the select all count as empty\n\t\t\t\tjQuery('#recordsCount').val('');\n\t\t\t\t//Make total number of pages as empty\n\t\t\t\tjQuery('#totalPageCount').text('');\n\t\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\t\tthisInstance.updatePagination();\n\t\t\t\t\tthisInstance.registerBasic();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/*\n\t\t * Function to register the list view row click event\n\t\t */\n\t\tregisterRowClickEvent: function () {\n\t\t\tvar listViewContentDiv = this.getListViewContentContainer();\n\t\t\tlistViewContentDiv.on('click', '.listViewEntries td:not(.tdActions)', function (e) {\n\t\t\t\tvar editUrl = jQuery(e.currentTarget).parent().find('..fas').closest('a').attr('href');\n\t\t\t\twindow.location.href = editUrl;\n\t\t\t});\n\t\t},\n\t\tgetDefaultParams: function () {\n\t\t\tvar pageNumber = jQuery('#pageNumber').val();\n\t\t\tvar module = app.getModuleName();\n\t\t\tvar parent = app.getParentModuleName();\n\t\t\tvar params = {\n\t\t\t\tmodule: module,\n\t\t\t\tparent: parent,\n\t\t\t\tpage: pageNumber,\n\t\t\t\tview: 'List',\n\t\t\t\tsourceModule: jQuery('#moduleFilter').val()\n\t\t\t};\n\n\t\t\treturn params;\n\t\t},\n\t\tregisterAddNewTemplate: function (container) {\n\t\t\tjQuery('#addButton', container).on('click', function () {\n\t\t\t\tvar selectedModule = jQuery('#moduleFilter option:selected').val();\n\t\t\t\twindow.location.href = jQuery(this).data('url') + (selectedModule ? '&source_module=' + selectedModule : '');\n\t\t\t});\n\t\t},\n\t\tregisterImportTemplate: function (container) {\n\t\t\tvar thisInstance = this;\n\t\t\tjQuery('#importButton', container).on('click', function (e) {\n\t\t\t\tvar currentElement = jQuery(e.currentTarget);\n\t\t\t\tvar url = currentElement.data('url');\n\t\t\t\tif (typeof url !== 'undefined') {\n\t\t\t\t\tapp.showModalWindow(null, url, function (data) {\n\t\t\t\t\t\tvar form = data.find('form');\n\t\t\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\t\t\tvar form = jQuery(e.currentTarget);\n\t\t\t\t\t\t\tvar invalidFields = form.data('jqv').InvalidFields;\n\t\t\t\t\t\t\tif (invalidFields.length > 0) {\n\t\t\t\t\t\t\t\t//If validation fails, form should submit again\n\t\t\t\t\t\t\t\tform.removeData('submit');\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthisInstance\n\t\t\t\t\t\t\t\t.importSave(form)\n\t\t\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: data.result.message, type: 'info' });\n\t\t\t\t\t\t\t\t\tjQuery('#moduleFilter').trigger('change');\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.fail(function (error, err) {});\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t},\n\t\timportSave: function (form) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar formData = new FormData(form[0]);\n\t\t\tvar params = {\n\t\t\t\turl: 'index.php',\n\t\t\t\ttype: 'POST',\n\t\t\t\tdata: formData,\n\t\t\t\tprocessData: false,\n\t\t\t\tcontentType: false\n\t\t\t};\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tregisterDeleteMap: function () {\n\t\t\tthis.getListContainer().on('click', '.deleteMap', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\t\t\t\tvar templateId = $(e.currentTarget).closest('tr').data('id');\n\t\t\t\tSettings_MappedFields_List_Js.deleteById(templateId);\n\t\t\t});\n\t\t},\n\t\tregisterBasic: function () {\n\t\t\tthis.registerDeleteMap();\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tvar container = this.getListContainer();\n\t\t\tthis.registerFilterChangeEvent();\n\t\t\tthis.registerAddNewTemplate(container);\n\t\t\tthis.registerImportTemplate(container);\n\t\t\tthis.registerBasic();\n\t\t}\n\t}\n);\n"],"names":["Settings_Vtiger_List_Js","getListContainer","jQuery","registerFilterChangeEvent","thisInstance","on","e","val","params","module","app","getModuleName","parent","getParentModuleName","sourceModule","currentTarget","text","getListViewRecords","done","updatePagination","registerBasic","registerRowClickEvent","listViewContentDiv","getListViewContentContainer","editUrl","find","closest","attr","window","location","href","getDefaultParams","pageNumber","page","view","registerAddNewTemplate","container","selectedModule","data","registerImportTemplate","currentElement","url","showModalWindow","form","validationEngine","validationEngineOptions","invalidFields","InvalidFields","length","removeData","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","importSave","hideModalWindow","mode","Settings_Vtiger_Index_Js","showMessage","result","message","type","trigger","fail","preventDefault","stopPropagation","aDeferred","Deferred","formData","FormData","AppConnector","request","processData","contentType","resolve","textStatus","errorThrown","reject","promise","registerDeleteMap","templateId","$","Settings_MappedFields_List_Js","deleteById","registerEvents","_super"],"mappings":"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"}