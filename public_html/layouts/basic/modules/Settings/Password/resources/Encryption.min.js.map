{"version":3,"file":"Encryption.min.js","sources":["Encryption.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_Password_Encryption_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Container\n\t\t */\n\t\tcontainer: null,\n\t\t/**\n\t\t * Set container\n\t\t * @param {Object} element\n\t\t */\n\t\tsetContainer: function (element) {\n\t\t\tthis.container = element;\n\t\t},\n\t\t/**\n\t\t * Get Container\n\t\t * @returns {Object}\n\t\t */\n\t\tgetContainer: function () {\n\t\t\treturn this.container;\n\t\t},\n\t\t/**\n\t\t * Get nav tab\n\t\t * @returns {Object}\n\t\t */\n\t\tgetActiveTabNav: function () {\n\t\t\treturn this.getContainer().find('.js-nav-container a.active');\n\t\t},\n\t\t/**\n\t\t * Get tab (Form)\n\t\t * @returns {Object}\n\t\t */\n\t\tgetTabForm: function () {\n\t\t\treturn this.getContainer().find('.tab-pane.active form');\n\t\t},\n\t\t/**\n\t\t * Register change tab\n\t\t */\n\t\tregisterChangeTab: function () {\n\t\t\tlet container = this.getContainer();\n\t\t\tthis.passwordAlert(container);\n\t\t\tcontainer.find('.js-nav-container a').on('click', (e) => {\n\t\t\t\tthis.loadTab(e.currentTarget.dataset.url);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Load content from URL\n\t\t * @param {string} url\n\t\t */\n\t\tloadTab: function (url) {\n\t\t\tlet tabContainer = this.getContainer().find('.js-tab-container');\n\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\tblockInfo: {\n\t\t\t\t\telementToBlock: tabContainer,\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request(url)\n\t\t\t\t.done((data) => {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\ttabContainer.html(data);\n\t\t\t\t\tthis.registerBasicEvents(tabContainer);\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(tabContainer.find('select'));\n\t\t\t\t})\n\t\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\t\tapp.errorLog(textStatus, errorThrown);\n\t\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Register events for change method encryption\n\t\t */\n\t\tregisterChangeMethodName: function () {\n\t\t\tlet container = this.getTabForm();\n\t\t\tif (container.length) {\n\t\t\t\tthis.passwordAlert(container);\n\t\t\t}\n\t\t\tcontainer.find('[name=\"methods\"]').on('change', (e) => {\n\t\t\t\tthis.passwordAlert($(e.currentTarget).closest('form'));\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register events for change method encryption\n\t\t */\n\t\tregisterChangeModule: function () {\n\t\t\tthis.getTabForm()\n\t\t\t\t.find('[name=\"target\"]')\n\t\t\t\t.on('change', (e) => {\n\t\t\t\t\tlet url = this.getActiveTabNav().data('url') + '&target=' + e.currentTarget.value;\n\t\t\t\t\tthis.loadTab(url);\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Password alerts\n\t\t * @param {jQuery} container\n\t\t */\n\t\tpasswordAlert: function (container) {\n\t\t\tlet methodElement = container.find('[name=\"methods\"]');\n\t\t\tlet mapLengthVector = JSON.parse($('[name=\"lengthVectors\"]').val());\n\t\t\tlet length = mapLengthVector[methodElement.val()];\n\t\t\tlet validator = '';\n\t\t\tlet passwordElement = container.find('#password');\n\t\t\tlet vectorElement = container.find('#vector');\n\t\t\tlet passwordInfoAlert = container.find('.js-password-alert');\n\t\t\tif (length == undefined) {\n\t\t\t\tpasswordInfoAlert.addClass('d-none');\n\t\t\t\tvectorElement.attr('disabled', 'disabled');\n\t\t\t\tpasswordElement.attr('disabled', 'disabled');\n\t\t\t} else if (length === 0) {\n\t\t\t\tpasswordInfoAlert.addClass('d-none');\n\t\t\t\tvectorElement.val('');\n\t\t\t\tvectorElement.attr('disabled', 'disabled');\n\t\t\t} else {\n\t\t\t\tpasswordInfoAlert.removeClass('d-none');\n\t\t\t\tpasswordInfoAlert.find('.js-password-length').text(length);\n\t\t\t\tvectorElement.removeAttr('disabled');\n\t\t\t\tpasswordElement.removeAttr('disabled');\n\t\t\t\tvalidator = 'validate[required,maxSize[' + length + '],minSize[' + length + ']]';\n\t\t\t}\n\t\t\tvectorElement.attr('data-validation-engine', validator);\n\t\t},\n\t\t/**\n\t\t * Register events for form\n\t\t */\n\t\tregisterForm: function () {\n\t\t\tlet form = this.getTabForm();\n\t\t\tform.on('submit', (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\tlet save = () => {\n\t\t\t\t\t\tlet progressElement = $.progressIndicator({ blockInfo: { enabled: true } });\n\t\t\t\t\t\tAppConnector.request(form.serializeFormData()).done((response) => {\n\t\t\t\t\t\t\tprogressElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: response.result,\n\t\t\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\t\t\thide: false\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.getActiveTabNav().trigger('click');\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t\tlet progressIndicatorElement = $.progressIndicator({ blockInfo: { enabled: true } });\n\t\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\t\tformData.mode = 'checkEncryptionStatus';\n\t\t\t\t\tAppConnector.request(formData).done((response) => {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tif (response.result.message) {\n\t\t\t\t\t\t\tapp.showConfirmModal(\n\t\t\t\t\t\t\t\tresponse.result.message + `<div>${app.vtranslate('JS_CHANGE_CONFIRMATION')}</div>`,\n\t\t\t\t\t\t\t\t(confirm) => {\n\t\t\t\t\t\t\t\t\tif (confirm) {\n\t\t\t\t\t\t\t\t\t\tsave();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else if (response.result.result) {\n\t\t\t\t\t\t\tsave();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register events to preview password\n\t\t */\n\t\tregisterPreviewPassword: function () {\n\t\t\tvar container = this.getTabForm();\n\t\t\tvar button = container.find('.previewPassword');\n\t\t\tbutton.on('mousedown', function () {\n\t\t\t\t$('#' + $(this).data('id')).attr('type', 'text');\n\t\t\t});\n\t\t\tbutton.on('mouseup', function () {\n\t\t\t\t$('#' + $(this).data('id')).attr('type', 'password');\n\t\t\t});\n\t\t\tbutton.on('mouseout', function () {\n\t\t\t\t$('#' + $(this).data('id')).attr('type', 'password');\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register basic events in view\n\t\t */\n\t\tregisterBasicEvents: function () {\n\t\t\tthis.registerForm();\n\t\t\tthis.registerChangeMethodName();\n\t\t\tthis.registerChangeModule();\n\t\t\tthis.registerPreviewPassword();\n\t\t},\n\t\t/**\n\t\t * Register all events in view\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tthis.setContainer($('.contentsDiv'));\n\t\t\tthis.registerChangeTab();\n\t\t\tthis.registerBasicEvents();\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","container","setContainer","element","getContainer","getActiveTabNav","find","getTabForm","registerChangeTab","passwordAlert","on","e","loadTab","currentTarget","dataset","url","tabContainer","progressIndicatorElement","$","progressIndicator","blockInfo","elementToBlock","enabled","AppConnector","request","done","data","mode","html","registerBasicEvents","App","Fields","Picklist","showSelect2ElementView","fail","textStatus","errorThrown","app","errorLog","registerChangeMethodName","length","closest","registerChangeModule","value","mapLengthVector","JSON","parse","val","methodElement","validator","passwordElement","vectorElement","passwordInfoAlert","addClass","attr","removeClass","text","removeAttr","registerForm","form","event","preventDefault","validationEngine","validationEngineOptions","serializeFormData","response","progressElement","showNotify","result","type","hide","trigger","formData","message","showConfirmModal","vtranslate","confirm","save","registerPreviewPassword","button","registerEvents"],"mappings":"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"}