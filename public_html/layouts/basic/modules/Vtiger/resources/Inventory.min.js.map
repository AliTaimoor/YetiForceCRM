{"version":3,"file":"Inventory.min.js","sources":["Inventory.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\n\t'Vtiger_Inventory_Js',\n\t{\n\t\tinventoryInstance: false,\n\n\t\t/**\n\t\t * Get inventory instance\n\t\t * @param {jQuery} container\n\t\t * @returns {Vtiger_Inventory_Js}\n\t\t */\n\t\tgetInventoryInstance: function (container) {\n\t\t\tif (this.inventoryInstance === false) {\n\t\t\t\tlet moduleClassName = container.find('[name=\"module\"]').val() + '_Inventory_Js';\n\t\t\t\tif (typeof window[moduleClassName] === 'undefined') {\n\t\t\t\t\tmoduleClassName = 'Vtiger_Inventory_Js';\n\t\t\t\t}\n\t\t\t\tif (typeof window[moduleClassName] !== 'undefined') {\n\t\t\t\t\tthis.inventoryInstance = new window[moduleClassName]();\n\t\t\t\t\tthis.inventoryInstance.registerEvents(container);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this.inventoryInstance;\n\t\t}\n\t},\n\t{\n\t\tform: false,\n\t\tdiscount: false,\n\t\ttax: false,\n\t\tcontainer: false,\n\t\tinventoryContainer: false,\n\t\tinventoryHeadContainer: false,\n\t\tsummaryTaxesContainer: false,\n\t\tsummaryDiscountContainer: false,\n\t\tsummaryCurrenciesContainer: false,\n\t\trowClass: 'tr.inventoryRow',\n\t\tdiscountModalFields: [\n\t\t\t'aggregationType',\n\t\t\t'globalDiscount',\n\t\t\t'groupCheckbox',\n\t\t\t'groupDiscount',\n\t\t\t'individualDiscount',\n\t\t\t'individualDiscountType',\n\t\t\t'additionalDiscount'\n\t\t],\n\t\ttaxModalFields: ['aggregationType', 'globalTax', 'groupCheckbox', 'groupTax', 'individualTax', 'regionalTax'],\n\t\t/**\n\t\t * Get current form element\n\t\t * @returns {jQuery}\n\t\t */\n\t\tgetForm() {\n\t\t\treturn this.form;\n\t\t},\n\t\t/**\n\t\t * Get current form element\n\t\t * @returns {jQuery}\n\t\t */\n\t\tloadConfig() {\n\t\t\tthis.discount = JSON.parse(this.form.find('.js-discount-config').val());\n\t\t\tthis.tax = JSON.parse(this.form.find('.js-tax-config').val());\n\t\t},\n\t\t/**\n\t\t * Function that is used to get the line item container\n\t\t * @return : jQuery object\n\t\t */\n\t\tgetContainer: function () {\n\t\t\tif (this.container === false) {\n\t\t\t\tthis.container = $('.js-inv-container');\n\t\t\t}\n\t\t\treturn this.container;\n\t\t},\n\t\tgetInventoryItemsContainer: function () {\n\t\t\treturn this.getContainer().find('.inventoryItems');\n\t\t},\n\t\tgetInventoryHeadContainer: function () {\n\t\t\tif (this.inventoryHeadContainer === false) {\n\t\t\t\tthis.inventoryHeadContainer = $('.inventoryHeader');\n\t\t\t}\n\t\t\treturn this.inventoryHeadContainer;\n\t\t},\n\t\tgetInventorySummaryDiscountContainer: function () {\n\t\t\tif (this.summaryDiscountContainer === false) {\n\t\t\t\tthis.summaryDiscountContainer = $('.inventorySummaryDiscounts');\n\t\t\t}\n\t\t\treturn this.summaryDiscountContainer;\n\t\t},\n\t\tgetInventorySummaryTaxesContainer: function () {\n\t\t\tif (this.summaryTaxesContainer === false) {\n\t\t\t\tthis.summaryTaxesContainer = $('.inventorySummaryTaxes');\n\t\t\t}\n\t\t\treturn this.summaryTaxesContainer;\n\t\t},\n\t\tgetInventorySummaryCurrenciesContainer: function () {\n\t\t\tif (this.summaryCurrenciesContainer === false) {\n\t\t\t\tthis.summaryCurrenciesContainer = $('.inventorySummaryCurrencies');\n\t\t\t}\n\t\t\treturn this.summaryCurrenciesContainer;\n\t\t},\n\t\tgetNextLineItemRowNumber: function () {\n\t\t\tlet $inventoryItemsNo = $('#inventoryItemsNo');\n\t\t\tlet rowNumber = parseInt($inventoryItemsNo.val()) + 1;\n\t\t\t$inventoryItemsNo.val(rowNumber);\n\t\t\treturn rowNumber;\n\t\t},\n\t\tgetAccountId: function () {\n\t\t\tlet accountReferenceField = $('#accountReferenceField').val();\n\t\t\tif (accountReferenceField != '') {\n\t\t\t\treturn $('[name=\"' + accountReferenceField + '\"]').val();\n\t\t\t}\n\t\t\treturn '';\n\t\t},\n\t\tcheckDeleteIcon: function () {\n\t\t\tif (this.getInventoryItemsContainer().find(this.rowClass).length > 1) {\n\t\t\t\tthis.showLineItemsDeleteIcon();\n\t\t\t} else if (app.getMainParams('isRequiredInventory')) {\n\t\t\t\tthis.hideLineItemsDeleteIcon();\n\t\t\t}\n\t\t},\n\t\tshowLineItemsDeleteIcon: function () {\n\t\t\tthis.getInventoryItemsContainer().find('.deleteRow').removeClass('d-none');\n\t\t},\n\t\thideLineItemsDeleteIcon: function () {\n\t\t\tthis.getInventoryItemsContainer().find('.deleteRow').addClass('d-none');\n\t\t},\n\t\tgetClosestRow: function (element) {\n\t\t\treturn element.closest(this.rowClass);\n\t\t},\n\t\t/**\n\t\t * Function which will return the basic row which can be used to add new rows\n\t\t * @return jQuery object which you can use to\n\t\t */\n\t\tgetBasicRow: function () {\n\t\t\treturn this.getForm().find('.js-inventory-base-item').eq(0).clone(true, true);\n\t\t},\n\t\tisRecordSelected: function (element) {\n\t\t\tlet parentRow = element.closest('tr');\n\t\t\tlet productField = parentRow.find('.recordLabel');\n\t\t\treturn productField.validationEngine('validate');\n\t\t},\n\t\tgetTaxModeSelectElement: function (row) {\n\t\t\tlet items = this.getInventoryHeadContainer();\n\t\t\tif (items.find('thead .js-taxmode').length > 0) {\n\t\t\t\treturn $('.js-taxmode');\n\t\t\t}\n\t\t\tif (row) {\n\t\t\t\treturn row.find('.js-taxmode');\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tisIndividualTaxMode: function (row) {\n\t\t\tlet selectedOption = this.getTaxModeSelectElement(row).find('option:selected');\n\t\t\tif (selectedOption.length !== 0) {\n\t\t\t\treturn selectedOption.val() == 1;\n\t\t\t}\n\t\t\treturn this.tax.default_mode == 1;\n\t\t},\n\t\tisGroupTaxMode: function () {\n\t\t\tlet selectedOption = this.getTaxModeSelectElement();\n\t\t\tif (selectedOption && (selectedOption = selectedOption.find('option:selected')) && selectedOption.length !== 0) {\n\t\t\t\treturn selectedOption.val() == 0;\n\t\t\t}\n\t\t\treturn this.tax.default_mode == 0;\n\t\t},\n\t\tshowIndividualTax: function (row) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet groupTax = thisInstance.getInventorySummaryTaxesContainer().find('.groupTax');\n\t\t\tlet items = thisInstance.getInventoryItemsContainer();\n\t\t\tlet newRow = $('#blackIthemTable').find('tbody');\n\t\t\tif (thisInstance.isIndividualTaxMode()) {\n\t\t\t\tgroupTax.addClass('d-none');\n\t\t\t\titems.find('.changeTax').removeClass('d-none');\n\t\t\t\tnewRow.find('.changeTax').removeClass('d-none');\n\t\t\t\tlet parentRow = thisInstance.getInventoryItemsContainer();\n\t\t\t\tlet taxParam = { aggregationType: 'global' };\n\n\t\t\t\tparentRow.find(thisInstance.rowClass).each(function () {\n\t\t\t\t\tlet thisItem = $(this);\n\t\t\t\t\ttaxParam['globalTax'] = parseFloat(thisItem.find('.js-tax').attr('data-default-tax'));\n\t\t\t\t\tthisInstance.setTaxParam(thisItem, taxParam);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthisInstance.setTax(items, 0);\n\t\t\t\tthisInstance.setTaxPercent(items, 0);\n\t\t\t\tthisInstance.setTaxParam(items, []);\n\t\t\t\tthisInstance.setDefaultGlobalTax(row);\n\t\t\t\tgroupTax.removeClass('d-none');\n\t\t\t\titems.find('.changeTax').addClass('d-none');\n\t\t\t\tnewRow.find('.changeTax').addClass('d-none');\n\t\t\t}\n\t\t\tthisInstance.rowsCalculations();\n\t\t},\n\t\tsetDefaultGlobalTax: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet parentRow = thisInstance.getInventoryItemsContainer();\n\t\t\tlet taxDefaultValue = thisInstance\n\t\t\t\t.getInventorySummaryTaxesContainer()\n\t\t\t\t.find('.js-default-tax')\n\t\t\t\t.data('tax-default-value');\n\t\t\tlet isGroupTax = thisInstance.isGroupTaxMode();\n\t\t\tlet summaryContainer = $('#blackIthemTable');\n\t\t\tif (isGroupTax) {\n\t\t\t\tlet taxParam = thisInstance.getTaxParams(summaryContainer);\n\t\t\t\tif (taxParam === false && taxDefaultValue) {\n\t\t\t\t\ttaxParam = { aggregationType: 'global' };\n\t\t\t\t\ttaxParam['globalTax'] = taxDefaultValue;\n\t\t\t\t\ttaxParam['individualTax'] = '';\n\t\t\t\t}\n\t\t\t\tif (taxParam) {\n\t\t\t\t\tthisInstance.setTaxParam(summaryContainer, taxParam);\n\t\t\t\t\tthisInstance.setTaxParam(parentRow, taxParam);\n\t\t\t\t\tparentRow.closest('.inventoryItems').data('taxParam', JSON.stringify(taxParam));\n\t\t\t\t\tparentRow.find(thisInstance.rowClass).each(function () {\n\t\t\t\t\t\tthisInstance.quantityChangeActions($(this));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthisInstance.setTaxParam(summaryContainer, []);\n\t\t\t\tparentRow.closest('.inventoryItems').data('taxParam', '[]');\n\t\t\t}\n\t\t},\n\t\tgetDiscountModeSelectElement: function (row) {\n\t\t\tlet items = this.getInventoryHeadContainer();\n\t\t\tif (items.find('thead .js-discountmode').length > 0) {\n\t\t\t\treturn $('.js-discountmode');\n\t\t\t}\n\t\t\treturn row.find('.js-discountmode');\n\t\t},\n\t\tisIndividualDiscountMode: function (row) {\n\t\t\tlet selectedOption = this.getDiscountModeSelectElement(row).find('option:selected');\n\t\t\tif (selectedOption.length === 0) {\n\t\t\t\treturn this.discount.default_mode == 1;\n\t\t\t}\n\t\t\treturn selectedOption.val() == 1;\n\t\t},\n\t\tshowIndividualDiscount: function (row) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet groupDiscount = thisInstance.getInventorySummaryDiscountContainer().find('.groupDiscount');\n\t\t\tlet items = thisInstance.getInventoryItemsContainer();\n\t\t\tlet newRow = $('#blackIthemTable').find('tbody');\n\t\t\tif (thisInstance.isIndividualDiscountMode(row)) {\n\t\t\t\tgroupDiscount.addClass('d-none');\n\t\t\t\titems.find('.js-change-discount').removeClass('d-none');\n\t\t\t\tnewRow.find('.js-change-discount').removeClass('d-none');\n\t\t\t} else {\n\t\t\t\tgroupDiscount.removeClass('d-none');\n\t\t\t\titems.find('.js-change-discount').addClass('d-none');\n\t\t\t\tnewRow.find('.js-change-discount').addClass('d-none');\n\t\t\t}\n\t\t\tthisInstance.setDiscount(items, 0);\n\t\t\tthisInstance.setDiscountParam(items, []);\n\t\t\tthisInstance.rowsCalculations();\n\t\t},\n\t\tgetCurrency: function () {\n\t\t\treturn $('.js-currency', this.getInventoryHeadContainer()).find('option:selected').val();\n\t\t},\n\t\t/**\n\t\t * Get discount aggregation\n\t\t *@returns {int}\n\t\t */\n\t\tgetDiscountAggregation: function () {\n\t\t\tconst element = $('.js-discount_aggreg', this.getInventoryHeadContainer()).find('option:selected');\n\t\t\tif (element.length) {\n\t\t\t\treturn parseInt(element.val());\n\t\t\t}\n\t\t\treturn parseInt(this.discount.aggregation);\n\t\t},\n\t\tgetTax: function (row) {\n\t\t\tconst self = this;\n\t\t\tlet taxParams = row.find('.taxParam').val();\n\t\t\tif (taxParams == '' || taxParams == '[]' || taxParams == undefined) return 0;\n\t\t\ttaxParams = JSON.parse(taxParams);\n\t\t\tlet valuePrices = this.getNetPrice(row);\n\t\t\tlet taxRate = 0;\n\t\t\tlet types = taxParams.aggregationType;\n\t\t\tif (typeof types == 'string') {\n\t\t\t\ttypes = [types];\n\t\t\t}\n\t\t\tif (types) {\n\t\t\t\ttypes.forEach(function (entry) {\n\t\t\t\t\tlet taxValue = 0;\n\t\t\t\t\tswitch (entry) {\n\t\t\t\t\t\tcase 'individual':\n\t\t\t\t\t\t\ttaxValue = taxParams.individualTax;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'global':\n\t\t\t\t\t\t\ttaxValue = taxParams.globalTax;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'group':\n\t\t\t\t\t\t\ttaxValue = taxParams.groupTax;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'regional':\n\t\t\t\t\t\t\ttaxValue = taxParams.regionalTax;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\ttaxRate += valuePrices * (taxValue / 100);\n\t\t\t\t\tif (self.tax.aggregation == 2) {\n\t\t\t\t\t\tvaluePrices = valuePrices + taxRate;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn taxRate;\n\t\t},\n\t\tgetTaxPercent: function (row) {\n\t\t\tlet taxParams = row.find('.taxParam').val();\n\t\t\tif (taxParams == '' || taxParams == '[]' || taxParams == undefined) return 0;\n\t\t\ttaxParams = JSON.parse(taxParams);\n\t\t\tlet taxPercent = 0;\n\t\t\tlet types =\n\t\t\t\ttypeof taxParams.aggregationType === 'string' ? [taxParams.aggregationType] : taxParams.aggregationType;\n\t\t\ttypes.forEach(function (aggregationType) {\n\t\t\t\ttaxPercent += taxParams[aggregationType + 'Tax'] || 0;\n\t\t\t});\n\t\t\treturn taxPercent;\n\t\t},\n\t\tgetTaxParams: function (row) {\n\t\t\tlet taxParams = row.find('.taxParam').val();\n\t\t\tif (taxParams == '' || taxParams == '[]' || taxParams == undefined) return false;\n\t\t\treturn JSON.parse(taxParams);\n\t\t},\n\t\tgetQuantityValue: function (row) {\n\t\t\treturn $('.qty', row).getNumberFromValue();\n\t\t},\n\t\tgetUnitPriceValue: function (row) {\n\t\t\treturn $('.unitPrice', row).getNumberFromValue();\n\t\t},\n\t\tgetDiscount: function (row) {\n\t\t\tlet discountParams = row.find('.discountParam').val();\n\t\t\tif (discountParams == '' || discountParams == 'null' || discountParams == '[]' || discountParams == undefined) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tconst aggregation = this.getDiscountAggregation();\n\t\t\tdiscountParams = JSON.parse(discountParams);\n\t\t\tlet valuePrices = this.getTotalPrice(row),\n\t\t\t\tdiscountRate = 0,\n\t\t\t\ttypes = discountParams.aggregationType;\n\t\t\tif (typeof types == 'string') {\n\t\t\t\ttypes = [types];\n\t\t\t}\n\t\t\tif (types) {\n\t\t\t\ttypes.forEach((entry) => {\n\t\t\t\t\tswitch (entry) {\n\t\t\t\t\t\tcase 'individual':\n\t\t\t\t\t\t\tif (discountParams.individualDiscountType === 'percentage') {\n\t\t\t\t\t\t\t\tdiscountRate += valuePrices * (discountParams.individualDiscount / 100);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdiscountRate += discountParams.individualDiscount;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'global':\n\t\t\t\t\t\t\tdiscountRate += valuePrices * (discountParams.globalDiscount / 100);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'group':\n\t\t\t\t\t\t\tdiscountRate += valuePrices * ((discountParams.groupDiscount ? discountParams.groupDiscount : 0) / 100);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'additional':\n\t\t\t\t\t\t\tdiscountRate += valuePrices * (discountParams.additionalDiscount / 100);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (aggregation === 2) {\n\t\t\t\t\t\tvaluePrices = valuePrices - discountRate;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn discountRate;\n\t\t},\n\t\tgetNetPrice: function (row) {\n\t\t\treturn this.getTotalPrice(row) - this.getDiscount(row);\n\t\t},\n\t\tgetTotalPrice: function (row) {\n\t\t\treturn this.getQuantityValue(row) * this.getUnitPriceValue(row);\n\t\t},\n\t\tgetGrossPrice: function (row) {\n\t\t\treturn $('.grossPrice', row).getNumberFromValue();\n\t\t},\n\t\tgetPurchase: function (row) {\n\t\t\tlet qty = this.getQuantityValue(row);\n\t\t\tlet element = $('.purchase', row);\n\t\t\tlet purchase = 0;\n\t\t\tif (element.length > 0) {\n\t\t\t\tpurchase = App.Fields.Double.formatToDb(element.val());\n\t\t\t}\n\t\t\treturn purchase * qty;\n\t\t},\n\t\tgetSummaryGrossPrice: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet price = 0;\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find(thisInstance.rowClass)\n\t\t\t\t.each(function () {\n\t\t\t\t\tprice += thisInstance.getGrossPrice($(this));\n\t\t\t\t});\n\t\t\treturn App.Fields.Double.formatToDb(price);\n\t\t},\n\t\t/**\n\t\t * Set currency\n\t\t * @param {int} val\n\t\t */\n\t\tsetCurrency(val) {\n\t\t\tthis.getInventoryHeadContainer().find('.js-currency').val(val).trigger('change');\n\t\t},\n\t\t/**\n\t\t * Set currency param\n\t\t * @param {string} val json string\n\t\t */\n\t\tsetCurrencyParam(val) {\n\t\t\tthis.getInventoryHeadContainer().find('.js-currencyparam').val(val);\n\t\t},\n\t\t/**\n\t\t * Set discount mode\n\t\t * @param {int} val\n\t\t */\n\t\tsetDiscountMode(val) {\n\t\t\tthis.getInventoryHeadContainer().find('.js-discountmode').val(val).trigger('change');\n\t\t},\n\t\t/**\n\t\t * Set tax mode\n\t\t * @param {int} val\n\t\t */\n\t\tsetTaxMode(val) {\n\t\t\tthis.getInventoryHeadContainer().find('.js-taxmode').val(val).trigger('change');\n\t\t},\n\t\t/**\n\t\t * Set inventory id\n\t\t * @param {jQuery} row\n\t\t * @param {int} val\n\t\t * @param {string} display\n\t\t */\n\t\tsetName(row, val, display) {\n\t\t\trow.find('.js-name').val(val).trigger('change');\n\t\t\trow.find('.js-name_display').val(display).attr('readonly', 'true').trigger('change');\n\t\t},\n\t\t/**\n\t\t * Set inventory row quantity\n\t\t * @param {jQuery} row\n\t\t * @param {int} val\n\t\t */\n\t\tsetQuantity(row, val) {\n\t\t\trow.find('.qty').val(val).trigger('change');\n\t\t},\n\t\t/**\n\t\t * Set unit original (db) value\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t * @param {string} display\n\t\t */\n\t\tsetUnit(row, val, display) {\n\t\t\trow.find('.unit').val(val).trigger('change');\n\t\t\trow.find('.unitText').text(display).trigger('change');\n\t\t},\n\t\t/**\n\t\t * Set subUnit original (db) value\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t * @param {string} display\n\t\t */\n\t\tsetSubUnit(row, val, display) {\n\t\t\trow.find('.subunit').val(val);\n\t\t\trow.find('.subunitText').val(display);\n\t\t},\n\t\t/**\n\t\t * Set inventory row comment\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetComment(row, val) {\n\t\t\trow\n\t\t\t\t.parent()\n\t\t\t\t.find('[numrowex=' + row.attr('numrow') + '] .comment')\n\t\t\t\t.val(val);\n\t\t},\n\t\t/**\n\t\t * Set inventory row unit price\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetUnitPrice: function (row, val) {\n\t\t\tval = App.Fields.Double.formatToDisplay(val);\n\t\t\trow.find('.unitPrice').val(val).attr('title', val);\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Set inventory row purchase\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetPurchase: function (row, val) {\n\t\t\trow.find('.purchase').val(App.Fields.Double.formatToDisplay(val));\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Set inventory row net price\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetNetPrice: function (row, val) {\n\t\t\tval = App.Fields.Double.formatToDisplay(val);\n\t\t\t$('.netPriceText', row).text(val);\n\t\t\t$('.netPrice', row).val(val);\n\t\t},\n\t\t/**\n\t\t * Set inventory row gross price\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetGrossPrice: function (row, val) {\n\t\t\tval = App.Fields.Double.formatToDisplay(val);\n\t\t\t$('.grossPriceText', row).text(val);\n\t\t\t$('.grossPrice', row).val(val);\n\t\t},\n\t\t/**\n\t\t * Set inventory row total price\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetTotalPrice: function (row, val) {\n\t\t\tval = App.Fields.Double.formatToDisplay(val);\n\t\t\t$('.totalPriceText', row).text(val);\n\t\t\t$('.totalPrice', row).val(val);\n\t\t},\n\t\t/**\n\t\t * Set inventory row margin\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetMargin: function (row, val) {\n\t\t\t$('.margin', row).val(App.Fields.Double.formatToDisplay(val));\n\t\t},\n\t\t/**\n\t\t * Set inventory row margin percent\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetMarginP: function (row, val) {\n\t\t\t$('.marginp', row).val(App.Fields.Double.formatToDisplay(val));\n\t\t},\n\t\t/**\n\t\t * Set inventory row discount\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetDiscount: function (row, val) {\n\t\t\t$('.discount', row).val(App.Fields.Double.formatToDisplay(val));\n\t\t},\n\t\t/**\n\t\t * Set inventory row discount param\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetDiscountParam: function (row, val) {\n\t\t\t$('.discountParam', row).val(JSON.stringify(val));\n\t\t},\n\t\t/**\n\t\t * Set inventory row tax\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetTax: function (row, val) {\n\t\t\t$('.tax', row).val(App.Fields.Double.formatToDisplay(val));\n\t\t},\n\t\t/**\n\t\t * Set inventory row tax percent\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetTaxPercent: function (row, val) {\n\t\t\t$('.js-tax-percent', row).val(App.Fields.Double.formatToDisplay(val));\n\t\t},\n\t\t/**\n\t\t * Set inventory row tax param\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetTaxParam: function (row, val) {\n\t\t\t$('.taxParam', row).val(JSON.stringify(val));\n\t\t},\n\t\tquantityChangeActions: function (row) {\n\t\t\tthis.rowCalculations(row);\n\t\t\tthis.summaryCalculations();\n\t\t},\n\t\trowCalculations: function (row) {\n\t\t\tthis.calculateTotalPrice(row);\n\t\t\tthis.calculateDiscounts(row);\n\t\t\tthis.calculateNetPrice(row);\n\t\t\tthis.calculateTaxes(row);\n\t\t\tthis.calculateGrossPrice(row);\n\t\t\tthis.calculateMargin(row);\n\t\t\tapp.event.trigger('Inventory.RowCalculations', this, row);\n\t\t},\n\t\trowsCalculations: function () {\n\t\t\tconst self = this;\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find(self.rowClass)\n\t\t\t\t.each(function () {\n\t\t\t\t\tlet row = $(this);\n\t\t\t\t\tself.syncHeaderData(row);\n\t\t\t\t\tself.quantityChangeActions(row);\n\t\t\t\t});\n\t\t\tself.calculateItemNumbers();\n\t\t},\n\t\tcalculateDiscounts: function (row) {\n\t\t\tthis.setDiscount(row, this.getDiscount(row));\n\t\t},\n\t\tcalculateTaxes: function (row) {\n\t\t\tthis.setTax(row, this.getTax(row));\n\t\t\tthis.setTaxPercent(row, this.getTaxPercent(row));\n\t\t},\n\t\tsummaryCalculations: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tthisInstance\n\t\t\t\t.getInventoryItemsContainer()\n\t\t\t\t.find('tfoot .wisableTd')\n\t\t\t\t.each(function () {\n\t\t\t\t\tthisInstance.calculateSummary($(this), $(this).data('sumfield'));\n\t\t\t\t});\n\t\t\tthisInstance.calculateDiscountSummary();\n\t\t\tthisInstance.calculateTaxSummary();\n\t\t\tthisInstance.calculateCurrenciesSummary();\n\t\t\tthisInstance.calculateMarginPSummary();\n\t\t},\n\t\tcalculateSummary: function (element, field) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet sum = 0;\n\t\t\telement\n\t\t\t\t.closest('.js-inv-container-group')\n\t\t\t\t.find(thisInstance.rowClass)\n\t\t\t\t.each(function () {\n\t\t\t\t\tlet e = $(this).find('.' + field);\n\t\t\t\t\tif (e.length > 0) {\n\t\t\t\t\t\tsum += App.Fields.Double.formatToDb(e.val());\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\telement.text(App.Fields.Double.formatToDisplay(sum));\n\t\t},\n\t\tcalculateMarginPSummary: function () {\n\t\t\tlet sumRow = this.getInventoryItemsContainer().find('tfoot'),\n\t\t\t\ttotalPriceField =\n\t\t\t\t\tsumRow.find('[data-sumfield=\"netPrice\"]').length > 0\n\t\t\t\t\t\t? sumRow.find('[data-sumfield=\"netPrice\"]')\n\t\t\t\t\t\t: sumRow.find('[data-sumfield=\"totalPrice\"]'),\n\t\t\t\tsumPrice = totalPriceField.getNumberFromText(),\n\t\t\t\tpurchase = 0,\n\t\t\t\tmarginp = 0;\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find(this.rowClass)\n\t\t\t\t.each(function () {\n\t\t\t\t\tlet qty = $(this).find('.qty').getNumberFromValue(),\n\t\t\t\t\t\tpurchasePrice = $(this).find('.purchase').getNumberFromValue();\n\t\t\t\t\tif (qty > 0 && purchasePrice > 0) {\n\t\t\t\t\t\tpurchase += qty * purchasePrice;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\tlet subtraction = sumPrice - purchase;\n\t\t\tif (purchase !== 0 && sumPrice !== 0) {\n\t\t\t\tmarginp = (subtraction * 100) / purchase;\n\t\t\t}\n\t\t\tsumRow.find('[data-sumfield=\"marginP\"]').text(App.Fields.Double.formatToDisplay(marginp) + '%');\n\t\t},\n\t\tcalculateDiscountSummary: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet discount = thisInstance.getAllDiscount();\n\t\t\tlet container = thisInstance.getInventorySummaryDiscountContainer();\n\t\t\tcontainer.find('input').val(App.Fields.Double.formatToDisplay(discount));\n\t\t},\n\t\tgetAllDiscount: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet discount = 0;\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find(thisInstance.rowClass)\n\t\t\t\t.each(function (index) {\n\t\t\t\t\tlet row = $(this);\n\t\t\t\t\tdiscount += thisInstance.getDiscount(row);\n\t\t\t\t});\n\t\t\treturn discount;\n\t\t},\n\t\tcalculateCurrenciesSummary: function () {\n\t\t\tlet container = this.getInventorySummaryCurrenciesContainer(),\n\t\t\t\tselected = $('.js-currency option:selected', this.getInventoryHeadContainer()),\n\t\t\t\tbase = $('.js-currency option[data-base-currency=\"1\"]', this.getInventoryHeadContainer()),\n\t\t\t\tconversionRate = selected.data('conversionRate'),\n\t\t\t\tbaseConversionRate = base.data('conversionRate');\n\t\t\tif (conversionRate == baseConversionRate) {\n\t\t\t\tcontainer.addClass('d-none');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconversionRate = parseFloat(baseConversionRate) / parseFloat(conversionRate);\n\t\t\tcontainer.removeClass('d-none');\n\t\t\tlet taxes = this.getAllTaxes();\n\t\t\tlet sum = 0;\n\t\t\tcontainer.find('.js-panel__body').html('');\n\t\t\t$.each(taxes, function (index, value) {\n\t\t\t\tif (value != undefined) {\n\t\t\t\t\tvalue = value * conversionRate;\n\t\t\t\t\tlet row = container.find('.d-none .form-group').clone();\n\t\t\t\t\trow.find('.percent').text(index + '%');\n\t\t\t\t\trow.find('input').val(App.Fields.Double.formatToDisplay(value));\n\t\t\t\t\trow.appendTo(container.find('.js-panel__body'));\n\t\t\t\t\tsum += value;\n\t\t\t\t}\n\t\t\t});\n\t\t\tcontainer.find('.js-panel__footer input').val(App.Fields.Double.formatToDisplay(sum));\n\t\t},\n\t\tcalculateTaxSummary: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet taxes = thisInstance.getAllTaxes();\n\t\t\tlet container = thisInstance.getInventorySummaryTaxesContainer();\n\t\t\tcontainer.find('.js-panel__body').html('');\n\t\t\tlet sum = 0;\n\t\t\tfor (let index in taxes) {\n\t\t\t\tlet row = container.find('.d-none .form-group').clone();\n\t\t\t\trow.find('.percent').text(App.Fields.Double.formatToDisplay(index) + '%');\n\t\t\t\trow.find('input').val(App.Fields.Double.formatToDisplay(taxes[index]));\n\t\t\t\trow.appendTo(container.find('.js-panel__body'));\n\t\t\t\tsum += taxes[index];\n\t\t\t}\n\t\t\tcontainer.find('.js-panel__footer input').val(App.Fields.Double.formatToDisplay(sum));\n\t\t},\n\t\tgetAllTaxes: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet tax = [];\n\t\t\tlet typeSummary = $('.aggregationTypeTax').val();\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find(thisInstance.rowClass)\n\t\t\t\t.each(function () {\n\t\t\t\t\tlet row = $(this);\n\t\t\t\t\tlet netPrice = thisInstance.getNetPrice(row);\n\t\t\t\t\tlet params = row.find('.taxParam').val();\n\t\t\t\t\tif (params != '' && params != '[]' && params != undefined) {\n\t\t\t\t\t\tlet param = JSON.parse(params);\n\t\t\t\t\t\tif (typeof param.aggregationType == 'string') {\n\t\t\t\t\t\t\tparam.aggregationType = [param.aggregationType];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (param.aggregationType)\n\t\t\t\t\t\t\t$.each(param.aggregationType, function (_, name) {\n\t\t\t\t\t\t\t\tname = name + 'Tax';\n\t\t\t\t\t\t\t\tif (param[name] == undefined) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlet percent = parseFloat(param[name]);\n\t\t\t\t\t\t\t\tlet old = 0;\n\t\t\t\t\t\t\t\tif (tax[percent] != undefined) {\n\t\t\t\t\t\t\t\t\told = parseFloat(tax[percent]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlet taxRate = netPrice * (percent / 100);\n\t\t\t\t\t\t\t\ttax[percent] = old + taxRate;\n\t\t\t\t\t\t\t\tif (typeSummary == '2') {\n\t\t\t\t\t\t\t\t\tnetPrice += taxRate;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\treturn tax;\n\t\t},\n\t\tcalculateNetPrice: function (row) {\n\t\t\tthis.setNetPrice(row, this.getNetPrice(row));\n\t\t},\n\t\tcalculateGrossPrice: function (row) {\n\t\t\tlet netPrice = this.getNetPrice(row);\n\t\t\tif (this.isIndividualTaxMode(row) || this.isGroupTaxMode(row)) {\n\t\t\t\tnetPrice += this.getTax(row);\n\t\t\t}\n\t\t\tthis.setGrossPrice(row, netPrice);\n\t\t},\n\t\tcalculateTotalPrice: function (row) {\n\t\t\tthis.setTotalPrice(row, this.getTotalPrice(row));\n\t\t},\n\t\tcalculateMargin: function (row) {\n\t\t\tlet netPrice;\n\t\t\tif ($('.netPrice', row).length) {\n\t\t\t\tnetPrice = this.getNetPrice(row);\n\t\t\t} else {\n\t\t\t\tnetPrice = this.getTotalPrice(row) - this.getDiscount(row);\n\t\t\t}\n\t\t\tlet purchase = this.getPurchase(row);\n\t\t\tlet margin = netPrice - purchase;\n\t\t\tthis.setMargin(row, margin);\n\t\t\tlet marginp = '0';\n\t\t\tif (purchase !== 0) {\n\t\t\t\tmarginp = (margin / purchase) * 100;\n\t\t\t}\n\t\t\tthis.setMarginP(row, marginp);\n\t\t},\n\t\tcalculateDiscount: function (_row, modal) {\n\t\t\tconst netPriceBeforeDiscount = App.Fields.Double.formatToDb(modal.find('.valueTotalPrice').text()),\n\t\t\t\tdiscountsType = modal.find('.discountsType').val();\n\t\t\tlet valuePrices = netPriceBeforeDiscount,\n\t\t\t\tglobalDiscount = 0,\n\t\t\t\tgroupDiscount = 0,\n\t\t\t\tindividualDiscount = 0,\n\t\t\t\tadditionalDiscount = 0;\n\t\t\tif (discountsType == 0 || discountsType == 1) {\n\t\t\t\tif (modal.find('.js-active .globalDiscount').length > 0) {\n\t\t\t\t\tglobalDiscount = App.Fields.Double.formatToDb(modal.find('.js-active .globalDiscount').val());\n\t\t\t\t}\n\t\t\t\tif (modal.find('.js-active .additionalDiscountValue').length > 0) {\n\t\t\t\t\tadditionalDiscount = App.Fields.Double.formatToDb(modal.find('.js-active .additionalDiscountValue').val());\n\t\t\t\t}\n\t\t\t\tif (modal.find('.js-active .individualDiscountType').length > 0) {\n\t\t\t\t\tlet value = App.Fields.Double.formatToDb(modal.find('.js-active .individualDiscountValue').val());\n\t\t\t\t\tif (modal.find('.js-active .individualDiscountType:checked').val() == 'percentage') {\n\t\t\t\t\t\tindividualDiscount = netPriceBeforeDiscount * (value / 100);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tindividualDiscount = value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tmodal.find('.js-active .groupCheckbox').length > 0 &&\n\t\t\t\t\tmodal.find('.js-active .groupCheckbox').prop('checked') == true\n\t\t\t\t) {\n\t\t\t\t\tgroupDiscount = App.Fields.Double.formatToDb(modal.find('.groupValue').val());\n\t\t\t\t\tgroupDiscount = netPriceBeforeDiscount * (groupDiscount / 100);\n\t\t\t\t}\n\t\t\t\tvaluePrices = valuePrices * ((100 - globalDiscount) / 100);\n\t\t\t\tvaluePrices = valuePrices * ((100 - additionalDiscount) / 100);\n\t\t\t\tvaluePrices = valuePrices - individualDiscount;\n\t\t\t\tvaluePrices = valuePrices - groupDiscount;\n\t\t\t} else if (discountsType == 2) {\n\t\t\t\tmodal.find('.js-active').each(function () {\n\t\t\t\t\tlet panel = $(this);\n\t\t\t\t\tif (panel.find('.globalDiscount').length > 0) {\n\t\t\t\t\t\tvaluePrices =\n\t\t\t\t\t\t\tvaluePrices * ((100 - App.Fields.Double.formatToDb(panel.find('.globalDiscount').val())) / 100);\n\t\t\t\t\t} else if (panel.find('.groupCheckbox').length > 0 && panel.find('.groupCheckbox').prop('checked') == true) {\n\t\t\t\t\t\tvaluePrices = valuePrices * ((100 - App.Fields.Double.formatToDb(panel.find('.groupValue').val())) / 100);\n\t\t\t\t\t} else if (panel.find('.individualDiscountType').length > 0) {\n\t\t\t\t\t\tlet value = App.Fields.Double.formatToDb(panel.find('.individualDiscountValue').val());\n\t\t\t\t\t\tif (panel.find('.individualDiscountType[name=\"individualDiscountType\"]:checked').val() === 'percentage') {\n\t\t\t\t\t\t\tvaluePrices = valuePrices * ((100 - value) / 100);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvaluePrices = valuePrices - value;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (panel.find('.additionalDiscountValue').length > 0) {\n\t\t\t\t\t\tvaluePrices =\n\t\t\t\t\t\t\tvaluePrices * ((100 - App.Fields.Double.formatToDb(panel.find('.additionalDiscountValue').val())) / 100);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tmodal.find('.valuePrices').text(App.Fields.Double.formatToDisplay(valuePrices));\n\t\t\tmodal.find('.valueDiscount').text(App.Fields.Double.formatToDisplay(netPriceBeforeDiscount - valuePrices));\n\t\t},\n\t\tcalculateTax: function (_row, modal) {\n\t\t\tlet netPriceWithoutTax = App.Fields.Double.formatToDb(modal.find('.valueNetPrice').text()),\n\t\t\t\tvaluePrices = netPriceWithoutTax,\n\t\t\t\tglobalTax = 0,\n\t\t\t\tgroupTax = 0,\n\t\t\t\tregionalTax = 0,\n\t\t\t\tindividualTax = 0;\n\n\t\t\tlet taxType = modal.find('.taxsType').val();\n\t\t\tif (taxType == '0' || taxType == '1') {\n\t\t\t\tif (modal.find('.js-active .globalTax').length > 0) {\n\t\t\t\t\tglobalTax = App.Fields.Double.formatToDb(modal.find('.js-active .globalTax').val());\n\t\t\t\t}\n\t\t\t\tif (modal.find('.js-active .individualTaxValue').length > 0) {\n\t\t\t\t\tlet value = App.Fields.Double.formatToDb(modal.find('.js-active .individualTaxValue').val());\n\t\t\t\t\tindividualTax = (value / 100) * valuePrices;\n\t\t\t\t}\n\t\t\t\tif (modal.find('.js-active .groupTax').length > 0) {\n\t\t\t\t\tgroupTax = App.Fields.Double.formatToDb(modal.find('.groupTax').val());\n\t\t\t\t\tgroupTax = netPriceWithoutTax * (groupTax / 100);\n\t\t\t\t}\n\t\t\t\tif (modal.find('.js-active .regionalTax').length > 0) {\n\t\t\t\t\tregionalTax = App.Fields.Double.formatToDb(modal.find('.regionalTax').val());\n\t\t\t\t\tregionalTax = netPriceWithoutTax * (regionalTax / 100);\n\t\t\t\t}\n\n\t\t\t\tvaluePrices = valuePrices * ((100 + globalTax) / 100);\n\t\t\t\tvaluePrices = valuePrices + individualTax;\n\t\t\t\tvaluePrices = valuePrices + groupTax;\n\t\t\t\tvaluePrices = valuePrices + regionalTax;\n\t\t\t} else if (taxType == '2') {\n\t\t\t\tmodal.find('.js-active').each(function () {\n\t\t\t\t\tlet panel = $(this);\n\t\t\t\t\tif (panel.find('.globalTax').length > 0) {\n\t\t\t\t\t\tvaluePrices = valuePrices * ((100 + App.Fields.Double.formatToDb(panel.find('.globalTax').val())) / 100);\n\t\t\t\t\t} else if (panel.find('.groupTax').length > 0) {\n\t\t\t\t\t\tvaluePrices = valuePrices * ((100 + App.Fields.Double.formatToDb(panel.find('.groupTax').val())) / 100);\n\t\t\t\t\t} else if (panel.find('.regionalTax').length > 0) {\n\t\t\t\t\t\tvaluePrices = valuePrices * ((100 + App.Fields.Double.formatToDb(panel.find('.regionalTax').val())) / 100);\n\t\t\t\t\t} else if (panel.find('.individualTaxValue').length > 0) {\n\t\t\t\t\t\tvaluePrices =\n\t\t\t\t\t\t\t((App.Fields.Double.formatToDb(panel.find('.individualTaxValue').val()) + 100) / 100) * valuePrices;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (netPriceWithoutTax) {\n\t\t\t\tlet taxValue = ((valuePrices - netPriceWithoutTax) / netPriceWithoutTax) * 100;\n\t\t\t\tmodal.find('.js-tax-value').text(App.Fields.Double.formatToDisplay(taxValue));\n\t\t\t}\n\t\t\tmodal.find('.valuePrices').text(App.Fields.Double.formatToDisplay(valuePrices));\n\t\t\tmodal.find('.valueTax').text(App.Fields.Double.formatToDisplay(valuePrices - netPriceWithoutTax));\n\t\t},\n\t\tupdateRowSequence: function () {\n\t\t\tlet items = this.getInventoryItemsContainer();\n\t\t\titems.find(this.rowClass).each(function (index) {\n\t\t\t\t$(this)\n\t\t\t\t\t.find('.sequence')\n\t\t\t\t\t.val(index + 1);\n\t\t\t});\n\t\t},\n\t\tregisterInventorySaveData: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tthisInstance.form.on(Vtiger_Edit_Js.recordPreSave, function () {\n\t\t\t\tthisInstance.syncHeaderData();\n\t\t\t\tif (!thisInstance.checkLimits(thisInstance.form)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tsyncHeaderData(container) {\n\t\t\tlet header = this.getInventoryHeadContainer();\n\t\t\tif (typeof container === 'undefined') {\n\t\t\t\tcontainer = this.getInventoryItemsContainer();\n\t\t\t}\n\t\t\tcontainer.find('.js-sync').each(function () {\n\t\t\t\tlet element = $(this);\n\t\t\t\tlet classElement = '.js-' + element.data('syncId');\n\t\t\t\tlet block = element.closest('.js-inv-container-group');\n\t\t\t\tlet value = block.find(classElement).length ? block.find(classElement) : header.find(classElement);\n\t\t\t\telement.val(value.val());\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will be used to handle price book popup\n\t\t * @params :  element - popup image element\n\t\t */\n\t\tpricebooksModalHandler: function (element) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet lineItemRow = element.closest(this.rowClass);\n\t\t\tlet rowName = lineItemRow.find('.rowName');\n\t\t\tapp.showRecordsList(\n\t\t\t\t{\n\t\t\t\t\tmodule: 'PriceBooks',\n\t\t\t\t\tsrc_module: $('[name=\"popupReferenceModule\"]', rowName).val(),\n\t\t\t\t\tsrc_record: $('.sourceField', rowName).val(),\n\t\t\t\t\tsrc_field: $('[name=\"popupReferenceModule\"]', rowName).data('field'),\n\t\t\t\t\tcurrency_id: thisInstance.getCurrency() || CONFIG.defaultCurrencyId\n\t\t\t\t},\n\t\t\t\t(modal, instance) => {\n\t\t\t\t\tinstance.setSelectEvent((responseData) => {\n\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\tmodule: 'PriceBooks',\n\t\t\t\t\t\t\taction: 'ProductListPrice',\n\t\t\t\t\t\t\trecord: responseData.id,\n\t\t\t\t\t\t\tsrc_record: $('.sourceField', rowName).val()\n\t\t\t\t\t\t}).done(function (data) {\n\t\t\t\t\t\t\tif (data.result) {\n\t\t\t\t\t\t\t\tthisInstance.setUnitPrice(lineItemRow, data.result);\n\t\t\t\t\t\t\t\tthisInstance.quantityChangeActions(lineItemRow);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tapp.errorLog('Incorrect data', responseData);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\tsubProductsCashe: [],\n\t\tloadSubProducts: function (parentRow, indicator) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet progressInstace;\n\t\t\tlet recordId = $('input.sourceField', parentRow).val();\n\t\t\tlet recordModule = parentRow.find('.rowName input[name=\"popupReferenceModule\"]').val();\n\t\t\tthisInstance.removeSubProducts(parentRow);\n\t\t\tif (recordId == '0' || recordId == '' || $.inArray(recordModule, ['Products', 'Services']) < 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (thisInstance.subProductsCashe[recordId]) {\n\t\t\t\tthisInstance.addSubProducts(parentRow, thisInstance.subProductsCashe[recordId]);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet subProrductParams = {\n\t\t\t\tmodule: 'Products',\n\t\t\t\taction: 'SubProducts',\n\t\t\t\trecord: recordId\n\t\t\t};\n\t\t\tif (indicator) {\n\t\t\t\tprogressInstace = $.progressIndicator();\n\t\t\t}\n\t\t\tAppConnector.request(subProrductParams)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tlet responseData = data.result;\n\t\t\t\t\tthisInstance.subProductsCashe[recordId] = responseData;\n\t\t\t\t\tthisInstance.addSubProducts(parentRow, responseData);\n\t\t\t\t\tif (progressInstace) {\n\t\t\t\t\t\tprogressInstace.hide();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function () {\n\t\t\t\t\tif (progressInstace) {\n\t\t\t\t\t\tprogressInstace.hide();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\tremoveSubProducts: function (parentRow) {\n\t\t\tlet subProductsContainer = $('.subProductsContainer ul', parentRow);\n\t\t\tsubProductsContainer.find('li').remove();\n\t\t},\n\t\taddSubProducts: function (parentRow, responseData) {\n\t\t\tlet subProductsContainer = $('.subProductsContainer ul', parentRow);\n\t\t\tfor (let id in responseData) {\n\t\t\t\tsubProductsContainer.append($('<li>').text(responseData[id]));\n\t\t\t}\n\t\t},\n\t\tmapResultsToFields: function (referenceModule, parentRow, responseData) {\n\t\t\tlet unit,\n\t\t\t\ttaxParam = [];\n\t\t\tlet thisInstance = this;\n\t\t\tlet isGroupTax = thisInstance.isGroupTaxMode();\n\t\t\tfor (let id in responseData) {\n\t\t\t\tlet recordData = responseData[id];\n\t\t\t\tlet description = recordData.description;\n\t\t\t\tlet unitPriceValues = recordData.unitPriceValues;\n\t\t\t\tlet unitPriceValuesJson = JSON.stringify(unitPriceValues);\n\t\t\t\t// Load taxes detail\n\t\t\t\tif (isGroupTax) {\n\t\t\t\t\tlet parameters = parentRow.closest('.inventoryItems').data('taxParam');\n\t\t\t\t\tif (parameters) {\n\t\t\t\t\t\ttaxParam = JSON.parse(parameters);\n\t\t\t\t\t}\n\t\t\t\t} else if (recordData['taxes']) {\n\t\t\t\t\ttaxParam = { aggregationType: recordData.taxes.type };\n\t\t\t\t\ttaxParam[recordData.taxes.type + 'Tax'] = recordData.taxes.value;\n\t\t\t\t}\n\t\t\t\tif (recordData['taxes']) {\n\t\t\t\t\tparentRow.find('.js-tax').attr('data-default-tax', recordData.taxes.value);\n\t\t\t\t}\n\t\t\t\tthisInstance.setPurchase(parentRow, recordData.purchase);\n\t\t\t\tthisInstance.setTaxParam(parentRow, taxParam);\n\t\t\t\tthisInstance.setTax(parentRow, 0);\n\t\t\t\tthisInstance.setTaxPercent(parentRow, 0);\n\n\t\t\t\tfor (let field in recordData['autoFields']) {\n\t\t\t\t\tlet inputField = parentRow.find('input.' + field);\n\t\t\t\t\tif (inputField.attr('type') === 'checkbox') {\n\t\t\t\t\t\tinputField.prop('checked', recordData['autoFields'][field]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinputField.val(recordData['autoFields'][field]);\n\t\t\t\t\t}\n\t\t\t\t\tif (recordData['autoFields'][field + 'Text']) {\n\t\t\t\t\t\tparentRow.find('.' + field + 'Text').text(recordData['autoFields'][field + 'Text']);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (recordData.price !== undefined) {\n\t\t\t\t\tthisInstance.setUnitPrice(parentRow, recordData.price);\n\t\t\t\t}\n\t\t\t\tif (unitPriceValuesJson !== undefined) {\n\t\t\t\t\t$('input.unitPrice', parentRow).attr('list-info', unitPriceValuesJson);\n\t\t\t\t}\n\t\t\t\tlet commentElement = $('textarea.js-inventory-item-comment', parentRow.next());\n\t\t\t\tlet editorInstance = CKEDITOR.instances[commentElement.attr('id')];\n\t\t\t\tif (editorInstance) {\n\t\t\t\t\teditorInstance.setData(description);\n\t\t\t\t} else {\n\t\t\t\t\tcommentElement.val(description);\n\t\t\t\t}\n\t\t\t\tif (typeof recordData['autoFields']['unit'] !== 'undefined') {\n\t\t\t\t\tunit = recordData['autoFields']['unit'];\n\t\t\t\t}\n\t\t\t\tapp.event.trigger('Inventory.SelectionItem', thisInstance, parentRow, recordData, referenceModule);\n\t\t\t\tthis.triggerQtyParam(unit, recordData.qtyPerUnit, parentRow);\n\t\t\t}\n\t\t\tif (referenceModule === 'Products') {\n\t\t\t\tthisInstance.loadSubProducts(parentRow, true);\n\t\t\t}\n\t\t\tthisInstance.quantityChangeActions(parentRow);\n\t\t},\n\t\t/**\n\t\t * Update qtyparam\n\t\t * @param {null|string} unit\n\t\t * @param int perUnit\n\t\t * @param {jQuery} parentRow\n\t\t */\n\t\ttriggerQtyParam(unit, perUnit, parentRow) {\n\t\t\tlet validationEngine;\n\t\t\tswitch (unit) {\n\t\t\t\tdefault:\n\t\t\t\t\t$('.qtyParamInfo', parentRow).addClass('d-none');\n\t\t\t\t\tvalidationEngine = 'validate[required,funcCall[Vtiger_NumberUserFormat_Validator_Js.invokeValidation]]';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'pack':\n\t\t\t\t\t$('.qtyParamInfo', parentRow).removeClass('d-none').removeClass('active');\n\t\t\t\t\t$('.qtyParamInfo', parentRow).attr('data-content', perUnit);\n\t\t\t\t\tvalidationEngine = 'validate[required,funcCall[Vtiger_WholeNumber_Validator_Js.invokeValidation]]';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'pcs':\n\t\t\t\t\t$('.qtyParamInfo', parentRow).addClass('d-none');\n\t\t\t\t\tvalidationEngine = 'validate[required,funcCall[Vtiger_WholeNumber_Validator_Js.invokeValidation]]';\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t$('input.qty', parentRow).attr('data-validation-engine', validationEngine);\n\t\t},\n\t\tsaveDiscountsParameters: function (parentRow, modal) {\n\t\t\tconst typeName = 'aggregationType',\n\t\t\t\tpanels = modal.find('[name=\"' + typeName + '\"]:checked');\n\t\t\tlet info = {};\n\t\t\tinfo[typeName] = [];\n\t\t\tpanels.each(function () {\n\t\t\t\tlet type = $(this).val(),\n\t\t\t\t\tcontainer = $(this).closest('.js-panel');\n\t\t\t\tif (panels.length > 1) {\n\t\t\t\t\tinfo[typeName].push(type);\n\t\t\t\t} else {\n\t\t\t\t\tinfo[typeName] = type;\n\t\t\t\t}\n\t\t\t\tcontainer.find('[name=\"' + type + 'Discount\"]').each(function () {\n\t\t\t\t\tlet param = type + 'Discount';\n\t\t\t\t\tlet element = $(this);\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase 'group':\n\t\t\t\t\t\t\tif (element.closest('.input-group').find('.groupCheckbox').prop('checked')) {\n\t\t\t\t\t\t\t\tinfo[param] = App.Fields.Double.formatToDb(element.val());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'individual':\n\t\t\t\t\t\t\tlet name = 'individualDiscountType';\n\t\t\t\t\t\t\tinfo[name] = container.find('[name=\"' + name + '\"]:checked').val();\n\t\t\t\t\t\t\tinfo[param] = App.Fields.Double.formatToDb(element.val());\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'global':\n\t\t\t\t\t\tcase 'additional':\n\t\t\t\t\t\t\tinfo[param] = App.Fields.Double.formatToDb(element.val());\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.setDiscountParam($('#blackIthemTable'), info);\n\t\t\tthis.setDiscountParam(parentRow, info);\n\t\t},\n\t\tsaveTaxsParameters: function (parentRow, modal) {\n\t\t\tlet info = {};\n\t\t\tconst extend = ['aggregationType', 'groupCheckbox', 'individualTaxType'];\n\t\t\t$.each(this.taxModalFields, function (_, param) {\n\t\t\t\tif ($.inArray(param, extend) >= 0) {\n\t\t\t\t\tif (modal.find('[name=\"' + param + '\"]:checked').length > 1) {\n\t\t\t\t\t\tinfo[param] = [];\n\t\t\t\t\t\tmodal.find('[name=\"' + param + '\"]:checked').each(function () {\n\t\t\t\t\t\t\tinfo[param].push($(this).val());\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinfo[param] = modal.find('[name=\"' + param + '\"]:checked').val();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tinfo[param] = App.Fields.Double.formatToDb(modal.find('[name=\"' + param + '\"]').val());\n\t\t\t\t}\n\t\t\t});\n\t\t\tparentRow.data('taxParam', JSON.stringify(info));\n\t\t\tthis.setTaxParam(parentRow, info);\n\t\t\tthis.setTaxParam($('#blackIthemTable'), info);\n\t\t},\n\t\tshowExpandedRow: function (row) {\n\t\t\tconst inventoryRowExpanded = this.getInventoryItemsContainer().find('[numrowex=\"' + row.attr('numrow') + '\"]');\n\t\t\tconst element = row.find('.toggleVisibility');\n\t\t\telement.data('status', '1');\n\t\t\tinventoryRowExpanded.removeClass('d-none');\n\t\t},\n\t\thideExpandedRow: function (row) {\n\t\t\tconst inventoryRowExpanded = this.getInventoryItemsContainer().find('[numrowex=\"' + row.attr('numrow') + '\"]');\n\t\t\tconst element = row.find('.toggleVisibility');\n\t\t\telement.data('status', '0');\n\t\t\tinventoryRowExpanded.addClass('d-none');\n\t\t},\n\t\tinitDiscountsParameters: function (parentRow, modal) {\n\t\t\tlet parameters = parentRow.find('.discountParam').val();\n\t\t\tif (parameters == '' || parameters == undefined) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tparameters = JSON.parse(parameters);\n\t\t\t$.each(this.discountModalFields, function (_, param) {\n\t\t\t\tlet parameter = parameters[param];\n\t\t\t\tlet field = modal.find('[name=\"' + param + '\"]');\n\t\t\t\tif (field.attr('type') == 'checkbox' || field.attr('type') == 'radio') {\n\t\t\t\t\tif ('groupCheckbox' === param && parameters['groupDiscount'] !== undefined) {\n\t\t\t\t\t\tfield.prop('checked', true);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tlet array = parameter;\n\t\t\t\t\tif (!$.isArray(array)) {\n\t\t\t\t\t\tarray = [array];\n\t\t\t\t\t}\n\t\t\t\t\t$.each(array, function (_, arrayValue) {\n\t\t\t\t\t\tlet value = field.filter('[value=\"' + arrayValue + '\"]').prop('checked', true);\n\t\t\t\t\t\tif (param == 'aggregationType') {\n\t\t\t\t\t\t\tvalue.closest('.js-panel').find('.js-panel__body').removeClass('d-none');\n\t\t\t\t\t\t\tvalue.closest('.js-panel').addClass('js-active');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else if (field.prop('tagName') == 'SELECT') {\n\t\t\t\t\tfield\n\t\t\t\t\t\t.find('option[value=\"' + parameter + '\"]')\n\t\t\t\t\t\t.prop('selected', 'selected')\n\t\t\t\t\t\t.change();\n\t\t\t\t} else if (!field.prop('readonly')) {\n\t\t\t\t\tfield.val(parameter);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.calculateDiscount(parentRow, modal);\n\t\t},\n\t\tinitTaxParameters: function (parentRow, modal) {\n\t\t\tlet parameters;\n\t\t\tif (parentRow.data('taxParam')) {\n\t\t\t\tparameters = parentRow.data('taxParam');\n\t\t\t} else {\n\t\t\t\tparameters = parentRow.find('.taxParam').val();\n\t\t\t}\n\t\t\tif (!parameters) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tparameters = JSON.parse(parameters.toString());\n\t\t\t$.each(this.taxModalFields, function (_, param) {\n\t\t\t\tlet parameter = parameters[param],\n\t\t\t\t\tfield = modal.find('[name=\"' + param + '\"]');\n\n\t\t\t\tif (field.attr('type') === 'checkbox' || field.attr('type') === 'radio') {\n\t\t\t\t\tlet array = parameter,\n\t\t\t\t\t\tvalue;\n\t\t\t\t\tif (!$.isArray(array)) {\n\t\t\t\t\t\tarray = [array];\n\t\t\t\t\t}\n\t\t\t\t\t$.each(array, function (_, arrayValue) {\n\t\t\t\t\t\tvalue = field.filter('[value=\"' + arrayValue + '\"]').prop('checked', true);\n\t\t\t\t\t\tif (param === 'aggregationType') {\n\t\t\t\t\t\t\tvalue.closest('.js-panel').find('.js-panel__body').removeClass('d-none');\n\t\t\t\t\t\t\tvalue.closest('.js-panel').addClass('js-active');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else if (field.prop('tagName') === 'SELECT') {\n\t\t\t\t\tfield\n\t\t\t\t\t\t.find('option[value=\"' + parameter + '\"]')\n\t\t\t\t\t\t.prop('selected', 'selected')\n\t\t\t\t\t\t.change();\n\t\t\t\t} else {\n\t\t\t\t\tlet input = modal.find('[name=\"' + param + '\"]');\n\t\t\t\t\tinput.val(App.Fields.Double.formatToDisplay(parameter));\n\t\t\t\t\tif (param === 'individualTax') {\n\t\t\t\t\t\tinput.formatNumber();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.calculateTax(parentRow, modal);\n\t\t},\n\t\tlimitEnableSave: false,\n\t\tcheckLimits: function () {\n\t\t\tconst account = this.getAccountId(),\n\t\t\t\tlimit = parseInt(app.getMainParams('inventoryLimit'));\n\t\t\tlet response = true;\n\t\t\tif (account == '' || this.limitEnableSave || !limit) {\n\t\t\t\treturn response;\n\t\t\t}\n\t\t\tlet progressInstace = $.progressIndicator();\n\t\t\tAppConnector.request({\n\t\t\t\tasync: false,\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'Inventory',\n\t\t\t\t\tmode: 'checkLimits',\n\t\t\t\t\trecord: account,\n\t\t\t\t\tcurrency: this.getCurrency(),\n\t\t\t\t\tprice: thisInthisstance.getSummaryGrossPrice()\n\t\t\t\t}\n\t\t\t})\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tprogressInstace.hide();\n\t\t\t\t\tif (data.result.status == false) {\n\t\t\t\t\t\tapp.showModalWindow(data.result.html, function () {});\n\t\t\t\t\t\tresponse = false;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function () {\n\t\t\t\t\tprogressInstace.hide();\n\t\t\t\t});\n\t\t\treturn response;\n\t\t},\n\t\tcurrencyChangeActions: function (select, option) {\n\t\t\tif (option.data('baseCurrency') !== select.val()) {\n\t\t\t\tthis.showCurrencyChangeModal(select, option);\n\t\t\t} else {\n\t\t\t\tthis.currencyConvertValues(select, option);\n\t\t\t\tselect.data('oldValue', select.val());\n\t\t\t}\n\t\t},\n\t\tshowCurrencyChangeModal: function (select, option) {\n\t\t\tlet thisInstance = this;\n\t\t\tif (thisInstance.lockCurrencyChange == true) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthisInstance.lockCurrencyChange = true;\n\t\t\tlet block = select.closest('th');\n\t\t\tlet modal = block.find('.modelContainer').clone();\n\t\t\tapp.showModalWindow(modal, function (data) {\n\t\t\t\tlet modal = $(data);\n\t\t\t\tlet currencyParam = JSON.parse(block.find('.js-currencyparam').val());\n\n\t\t\t\tif (currencyParam != false) {\n\t\t\t\t\tif (typeof currencyParam[option.val()] === 'undefined') {\n\t\t\t\t\t\tlet defaultCurrencyParams = {\n\t\t\t\t\t\t\tvalue: 1,\n\t\t\t\t\t\t\tdate: ''\n\t\t\t\t\t\t};\n\t\t\t\t\t\tcurrencyParam[option.val()] = defaultCurrencyParams;\n\t\t\t\t\t}\n\t\t\t\t\tmodal.find('.currencyName').text(option.text());\n\t\t\t\t\tmodal.find('.currencyRate').val(currencyParam[option.val()]['value']);\n\t\t\t\t\tmodal.find('.currencyDate').text(currencyParam[option.val()]['date']);\n\t\t\t\t}\n\t\t\t\tmodal\n\t\t\t\t\t.on('click', 'button[type=\"submit\"]', function () {\n\t\t\t\t\t\tlet rate = modal.find('.currencyRate').val();\n\t\t\t\t\t\tlet value = App.Fields.Double.formatToDb(rate);\n\t\t\t\t\t\tlet conversionRate = 1 / App.Fields.Double.formatToDb(rate);\n\n\t\t\t\t\t\toption.data('conversionRate', conversionRate);\n\t\t\t\t\t\tcurrencyParam[option.val()] = {\n\t\t\t\t\t\t\tdate: option.data('conversionDate'),\n\t\t\t\t\t\t\tvalue: value.toString(),\n\t\t\t\t\t\t\tconversion: conversionRate.toString()\n\t\t\t\t\t\t};\n\t\t\t\t\t\tblock.find('.js-currencyparam').val(JSON.stringify(currencyParam));\n\n\t\t\t\t\t\tthisInstance.currencyConvertValues(select, option);\n\t\t\t\t\t\tselect.data('oldValue', select.val());\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\tthisInstance.lockCurrencyChange = false;\n\t\t\t\t\t})\n\t\t\t\t\t.one('hidden.bs.modal', function () {\n\t\t\t\t\t\tselect.val(select.data('oldValue')).change();\n\t\t\t\t\t\tthisInstance.lockCurrencyChange = false;\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tcurrencyConvertValues: function (select, selected) {\n\t\t\tconst self = this;\n\t\t\tlet previous = select.find('option[value=\"' + select.data('oldValue') + '\"]');\n\t\t\tlet conversionRate = selected.data('conversionRate');\n\t\t\tlet prevConversionRate = previous.data('conversionRate');\n\t\t\tconversionRate = parseFloat(conversionRate) / parseFloat(prevConversionRate);\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find(self.rowClass)\n\t\t\t\t.each(function (_) {\n\t\t\t\t\tlet row = $(this);\n\t\t\t\t\tself.syncHeaderData(row);\n\t\t\t\t\tself.setUnitPrice(row, self.getUnitPriceValue(row) * conversionRate);\n\t\t\t\t\tself.setDiscount(row, self.getDiscount(row) * conversionRate);\n\t\t\t\t\tself.setTax(row, self.getTax(row) * conversionRate);\n\t\t\t\t\tself.setPurchase(row, self.getPurchase(row) * conversionRate);\n\t\t\t\t\tself.quantityChangeActions(row);\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Set up all row data that comes from request\n\t\t * @param {jQuery} row\n\t\t * @param {object} rowData\n\t\t */\n\t\tsetRowData(row, rowData) {\n\t\t\tthis.setName(row, rowData.name, rowData.info.name);\n\t\t\tthis.setQuantity(row, App.Fields.Double.formatToDisplay(rowData.qty));\n\t\t\tthis.setUnit(row, rowData.info.autoFields.unit, rowData.info.autoFields.unitText);\n\t\t\tif (typeof rowData.info.autoFields !== 'undefined' && typeof rowData.info.autoFields.subunit !== 'undefined') {\n\t\t\t\tthis.setSubUnit(row, rowData.info.autoFields.subunit, rowData.info.autoFields.subunitText);\n\t\t\t}\n\t\t\tthis.setComment(row, rowData.comment1);\n\t\t\tthis.setUnitPrice(row, App.Fields.Double.formatToDisplay(rowData.price));\n\t\t\tthis.setNetPrice(row, App.Fields.Double.formatToDisplay(rowData.net));\n\t\t\tthis.setGrossPrice(row, App.Fields.Double.formatToDisplay(rowData.gross));\n\t\t\tthis.setTotalPrice(row, App.Fields.Double.formatToDisplay(rowData.total));\n\t\t\tlet discountParam = rowData.discountparam || null;\n\t\t\tthis.setDiscountParam(row, JSON.parse(discountParam));\n\t\t\tthis.setDiscount(row, App.Fields.Double.formatToDisplay(rowData.discount));\n\t\t\tthis.setTaxParam(row, JSON.parse(rowData.taxparam));\n\t\t\tthis.setTax(row, App.Fields.Double.formatToDisplay(rowData.tax));\n\t\t\tthis.setTaxPercent(row, App.Fields.Double.formatToDisplay(rowData.tax_percent));\n\t\t},\n\t\t/**\n\t\t * Add new row to inventory list\n\t\t * @param {string} module\n\t\t * @param {string} baseTableId\n\t\t * @param {object} rowData [optional]\n\t\t */\n\t\taddItem(module, baseTableId, rowData = false, group = null) {\n\t\t\tconst items = group || this.getInventoryItemsContainer();\n\t\t\tlet newRow = this.getBasicRow();\n\t\t\tconst sequenceNumber = this.getNextLineItemRowNumber();\n\t\t\tconst replaced = newRow.html().replace(/\\_NUM_/g, sequenceNumber);\n\t\t\tconst moduleLabels = newRow.data('moduleLbls');\n\t\t\tnewRow.html(replaced);\n\t\t\tnewRow = newRow.children().appendTo(items.find('.js-inventory-items-body'));\n\t\t\tnewRow.find('.rowName input[name=\"popupReferenceModule\"]').val(module).data('field', baseTableId);\n\t\t\tnewRow.find('.js-module-icon').removeClass().addClass(`yfm-${module}`);\n\t\t\tnewRow.find('.rowName span.input-group-text').attr('data-content', moduleLabels[module]);\n\t\t\tnewRow.find('.colPicklistField select').each(function (_, select) {\n\t\t\t\tselect = $(select);\n\t\t\t\tselect.find('option').each(function (_, option) {\n\t\t\t\t\toption = $(option);\n\t\t\t\t\tif (option.data('module') !== module) {\n\t\t\t\t\t\toption.remove();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.initItem(newRow);\n\t\t\tVtiger_Edit_Js.getInstance().registerAutoCompleteFields(newRow);\n\t\t\tif (rowData) {\n\t\t\t\tthis.setRowData(newRow, rowData);\n\t\t\t\tthis.quantityChangeActions(newRow);\n\t\t\t}\n\t\t\treturn newRow;\n\t\t},\n\t\t/**\n\t\t * Add block\n\t\t * @returns\n\t\t */\n\t\taddBlock() {\n\t\t\tlet block = this.getContainer().find('.js-inv-container-group:last');\n\t\t\tlet newBlock = block.clone(true, true);\n\t\t\tnewBlock.find('.grouplabel').val('');\n\t\t\tnewBlock.find('.js-inventory-items-body').empty();\n\t\t\tnewBlock.find('.js-groupid').val(this.getNextBlockId());\n\t\t\tblock.after(newBlock);\n\t\t\tthis.registerSortableItems();\n\t\t\treturn newBlock;\n\t\t},\n\t\t/**\n\t\t * Get next block ID\n\t\t * @returns int\n\t\t */\n\t\tgetNextBlockId() {\n\t\t\tlet data = [...this.getContainer().find('.js-groupid')].map((o) => parseInt(o.value));\n\t\t\treturn Math.max(...data) + 1;\n\t\t},\n\n\t\t/**\n\t\t * Register add item button click\n\t\t */\n\t\tregisterAddItem() {\n\t\t\tthis.getContainer()\n\t\t\t\t.find('.js-inv-add-item')\n\t\t\t\t.on('click', (e) => {\n\t\t\t\t\tthis.addItem(\n\t\t\t\t\t\te.currentTarget.dataset.module,\n\t\t\t\t\t\te.currentTarget.dataset.field,\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t$(e.currentTarget).closest('.js-inv-container-group')\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register add block\n\t\t */\n\t\tregisterAddBlock() {\n\t\t\tthis.getContainer()\n\t\t\t\t.find('.js-inv-add-group')\n\t\t\t\t.on('click', () => {\n\t\t\t\t\tthis.addBlock();\n\t\t\t\t});\n\t\t},\n\t\tregisterSortableItems: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet items = thisInstance.getContainer();\n\t\t\titems.sortable({\n\t\t\t\thandle: '.dragHandle',\n\t\t\t\titems: thisInstance.rowClass,\n\t\t\t\trevert: true,\n\t\t\t\ttolerance: 'pointer',\n\t\t\t\tplaceholder: 'ui-state-highlight',\n\t\t\t\thelper: function (e, ui) {\n\t\t\t\t\tui.children().each(function (_, element) {\n\t\t\t\t\t\telement = $(element);\n\t\t\t\t\t\telement.width(element.width());\n\t\t\t\t\t});\n\t\t\t\t\treturn ui;\n\t\t\t\t},\n\t\t\t\tstart: function (_, ui) {\n\t\t\t\t\titems.find(thisInstance.rowClass).each(function (_, element) {\n\t\t\t\t\t\tlet row = $(element);\n\t\t\t\t\t\tthisInstance.hideExpandedRow(row);\n\t\t\t\t\t});\n\t\t\t\t\tlet num = $(ui.item).attr('numrow');\n\t\t\t\t\titems.find('[numrowex=\"' + num + '\"] .js-inventory-item-comment').each(function () {\n\t\t\t\t\t\tApp.Fields.Text.destroyEditor($(this));\n\t\t\t\t\t});\n\t\t\t\t\tui.item.startPos = ui.item.index();\n\t\t\t\t},\n\t\t\t\tstop: function (_, ui) {\n\t\t\t\t\tlet numrow = $(ui.item).attr('numrow');\n\t\t\t\t\tlet child = items.find('.numRow' + numrow);\n\t\t\t\t\titems.find('[numrow=\"' + numrow + '\"]').after(child);\n\t\t\t\t\tApp.Fields.Text.Editor.register(child);\n\t\t\t\t\tthisInstance.updateRowSequence();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterShowHideExpanded: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tthisInstance.form.on('click', '.toggleVisibility', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tlet row = thisInstance.getClosestRow(element);\n\t\t\t\tif (element.data('status') == 0) {\n\t\t\t\t\tthisInstance.showExpandedRow(row);\n\t\t\t\t} else {\n\t\t\t\t\tthisInstance.hideExpandedRow(row);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterPriceBookModal: function (container) {\n\t\t\tlet thisInstance = this;\n\t\t\tcontainer.find('.js-price-book-modal').on('click', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tlet response = thisInstance.isRecordSelected(element);\n\t\t\t\tif (response == true) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthisInstance.pricebooksModalHandler(element);\n\t\t\t});\n\t\t},\n\t\tregisterRowChangeEvent: function (container) {\n\t\t\tcontainer.on('focusout', '.qty', (e) => {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\telement.formatNumber();\n\t\t\t\tthis.quantityChangeActions(this.getClosestRow(element));\n\t\t\t});\n\t\t\tcontainer.on('focusout', '.unitPrice', (e) => {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\telement.formatNumber();\n\t\t\t\tthis.quantityChangeActions(this.getClosestRow(element));\n\t\t\t});\n\t\t\tcontainer.on('focusout', '.purchase', (e) => {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\telement.formatNumber();\n\t\t\t\tthis.quantityChangeActions(this.getClosestRow(element));\n\t\t\t});\n\t\t\tlet headContainer = this.getInventoryHeadContainer();\n\t\t\theadContainer.on('change', '.js-taxmode', (e) => {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tthis.showIndividualTax(this.getClosestRow(element));\n\t\t\t\tthis.rowsCalculations();\n\t\t\t});\n\t\t\theadContainer.on('change', '.js-discountmode', (e) => {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tthis.showIndividualDiscount(this.getClosestRow(element));\n\t\t\t\tthis.rowsCalculations();\n\t\t\t});\n\t\t},\n\t\tregisterSubProducts: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tthisInstance.form.find('.inventoryItems ' + thisInstance.rowClass).each(function () {\n\t\t\t\tthisInstance.loadSubProducts($(this), false);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register clear reference selection\n\t\t */\n\t\tregisterClearReferenceSelection() {\n\t\t\tthis.form.on('click', '.clearReferenceSelection', (e) => {\n\t\t\t\tconst referenceGroup = $(e.currentTarget).closest('div.referenceGroup');\n\t\t\t\tif (referenceGroup.length) {\n\t\t\t\t\treferenceGroup.find('input[id$=\"_display\"]').val('').removeAttr('readonly');\n\t\t\t\t} else {\n\t\t\t\t\tconst row = this.getClosestRow($(e.currentTarget));\n\t\t\t\t\tthis.removeSubProducts(row);\n\t\t\t\t\trow\n\t\t\t\t\t\t.find('.unitPrice,.tax,.discount,.margin,.purchase,.js-tax-percent')\n\t\t\t\t\t\t.val(App.Fields.Double.formatToDisplay(0));\n\t\t\t\t\trow.find('.qty').val(1);\n\t\t\t\t\trow.find('textarea,.valueVal').val('');\n\t\t\t\t\trow.find('.valueText').text('');\n\t\t\t\t\trow.find('.qtyParamInfo').addClass('d-none');\n\t\t\t\t\trow.find('.recordLabel').val('').removeAttr('readonly');\n\t\t\t\t\tif (!this.isGroupTaxMode()) {\n\t\t\t\t\t\tthis.setTaxParam(row, []);\n\t\t\t\t\t}\n\t\t\t\t\tthis.quantityChangeActions(row);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterDeleteLineItemEvent: function (container) {\n\t\t\tcontainer.on('click', '.deleteRow', (e) => {\n\t\t\t\tlet num = this.getClosestRow($(e.currentTarget)).attr('numrow');\n\t\t\t\tthis.deleteLineItem(num);\n\t\t\t});\n\t\t},\n\t\tdeleteLineItem: function (num) {\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find('[numrowex=\"' + num + '\"] .js-inventory-item-comment')\n\t\t\t\t.each(function () {\n\t\t\t\t\tApp.Fields.Text.destroyEditor($(this));\n\t\t\t\t});\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find('[numrow=\"' + num + '\"], [numrowex=\"' + num + '\"]')\n\t\t\t\t.remove();\n\t\t\tthis.checkDeleteIcon();\n\t\t\tthis.rowsCalculations();\n\t\t\tif (this.getInventoryItemsContainer().find('.inventoryRow').length === 0) {\n\t\t\t\t$('#inventoryItemsNo').val(0);\n\t\t\t}\n\t\t\tthis.updateRowSequence();\n\t\t},\n\t\tregisterChangeDiscount: function () {\n\t\t\tthis.form.on('click', '.js-change-discount', (e) => {\n\t\t\t\tlet parentRow;\n\t\t\t\tconst element = $(e.currentTarget);\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: 'Inventory',\n\t\t\t\t\tmode: 'showDiscounts',\n\t\t\t\t\tcurrency: this.getCurrency(),\n\t\t\t\t\tdiscountAggregation: this.getDiscountAggregation(),\n\t\t\t\t\trelatedRecord: this.getAccountId()\n\t\t\t\t};\n\t\t\t\tif (element.hasClass('groupDiscount')) {\n\t\t\t\t\tparentRow = this.getInventoryItemsContainer();\n\t\t\t\t\tif (parentRow.find('tfoot .colTotalPrice').length != 0) {\n\t\t\t\t\t\tparams.totalPrice = App.Fields.Double.formatToDb(parentRow.find('tfoot .colTotalPrice').text());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparams.totalPrice = 0;\n\t\t\t\t\t}\n\t\t\t\t\tparams.discountType = 1;\n\t\t\t\t} else {\n\t\t\t\t\tparentRow = element.closest(this.rowClass);\n\t\t\t\t\tparams.totalPrice = this.getTotalPrice(parentRow);\n\t\t\t\t\tparams.discountType = 0;\n\t\t\t\t}\n\t\t\t\tlet progressInstace = $.progressIndicator();\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done((data) => {\n\t\t\t\t\t\tapp.showModalWindow(data, (data) => {\n\t\t\t\t\t\t\tthis.initDiscountsParameters(parentRow, $(data));\n\t\t\t\t\t\t\tthis.registerChangeDiscountModal(data, parentRow, params);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tprogressInstace.hide();\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function () {\n\t\t\t\t\t\tprogressInstace.hide();\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterChangeDiscountModal: function (modal, parentRow, params) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet form = modal.find('form');\n\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\tmodal.on('change', '.individualDiscountType', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tmodal.find('.individualDiscountContainer .input-group-text').text(element.data('symbol'));\n\t\t\t});\n\t\t\tmodal.on('change', '.activeCheckbox[name=\"aggregationType\"]', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\n\t\t\t\tif (element.attr('type') == 'checkbox' && this.checked) {\n\t\t\t\t\telement.closest('.js-panel').find('.js-panel__body').removeClass('d-none');\n\t\t\t\t\telement.closest('.js-panel').addClass('js-active');\n\t\t\t\t} else if (element.attr('type') == 'radio') {\n\t\t\t\t\tmodal.find('.js-panel').removeClass('js-active');\n\t\t\t\t\tmodal.find('.js-panel .js-panel__body').addClass('d-none');\n\t\t\t\t\telement.closest('.js-panel').find('.js-panel__body').removeClass('d-none');\n\t\t\t\t\telement.closest('.js-panel').addClass('js-active');\n\t\t\t\t} else {\n\t\t\t\t\telement.closest('.js-panel').find('.js-panel__body').addClass('d-none');\n\t\t\t\t\telement.closest('.js-panel').removeClass('js-active');\n\t\t\t\t}\n\t\t\t});\n\t\t\tmodal.on(\n\t\t\t\t'change',\n\t\t\t\t'.activeCheckbox, .globalDiscount,.individualDiscountValue,.individualDiscountType,.groupCheckbox,.additionalDiscountValue',\n\t\t\t\tfunction () {\n\t\t\t\t\tthisInstance.calculateDiscount(parentRow, modal);\n\t\t\t\t}\n\t\t\t);\n\t\t\tmodal.on('click', '.js-save-discount', function () {\n\t\t\t\tif (form.validationEngine('validate') === false) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthisInstance.saveDiscountsParameters(parentRow, modal);\n\t\t\t\tif (params.discountType == 0) {\n\t\t\t\t\tthisInstance.setDiscount(parentRow, App.Fields.Double.formatToDb(modal.find('.valueDiscount').text()));\n\t\t\t\t\tthisInstance.quantityChangeActions(parentRow);\n\t\t\t\t} else {\n\t\t\t\t\tlet rate =\n\t\t\t\t\t\tApp.Fields.Double.formatToDb(modal.find('.valueDiscount').text()) /\n\t\t\t\t\t\tApp.Fields.Double.formatToDb(modal.find('.valueTotalPrice').text());\n\t\t\t\t\tparentRow.find(thisInstance.rowClass).each(function () {\n\t\t\t\t\t\tthisInstance.setDiscount($(this), thisInstance.getTotalPrice($(this)) * rate);\n\t\t\t\t\t\tthisInstance.quantityChangeActions($(this));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tapp.hideModalWindow();\n\t\t\t});\n\t\t},\n\t\tregisterChangeTax: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tthisInstance.form.on('click', '.changeTax', function (e) {\n\t\t\t\tlet parentRow;\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: 'Inventory',\n\t\t\t\t\tmode: 'showTaxes',\n\t\t\t\t\tcurrency: thisInstance.getCurrency(),\n\t\t\t\t\trelatedRecord: thisInstance.getAccountId()\n\t\t\t\t};\n\t\t\t\tif (element.hasClass('groupTax')) {\n\t\t\t\t\tparentRow = thisInstance.getInventoryItemsContainer();\n\t\t\t\t\tlet totalPrice = 0;\n\t\t\t\t\tif (parentRow.find('tfoot .colNetPrice').length > 0) {\n\t\t\t\t\t\ttotalPrice = parentRow.find('tfoot .colNetPrice').text();\n\t\t\t\t\t} else if (parentRow.find('tfoot .colTotalPrice ').length > 0) {\n\t\t\t\t\t\ttotalPrice = parentRow.find('tfoot .colTotalPrice ').text();\n\t\t\t\t\t}\n\t\t\t\t\tparams.totalPrice = App.Fields.Double.formatToDb(totalPrice);\n\t\t\t\t\tparams.taxType = 1;\n\t\t\t\t} else {\n\t\t\t\t\tparentRow = element.closest(thisInstance.rowClass);\n\t\t\t\t\tlet sourceRecord = parentRow.find('.rowName .sourceField').val();\n\t\t\t\t\tparams.totalPrice = thisInstance.getNetPrice(parentRow);\n\t\t\t\t\tparams.taxType = 0;\n\t\t\t\t\tif (sourceRecord) {\n\t\t\t\t\t\tparams.record = sourceRecord;\n\t\t\t\t\t}\n\t\t\t\t\tparams.recordModule = parentRow.find('.rowName [name=\"popupReferenceModule\"]').val();\n\t\t\t\t}\n\t\t\t\tlet progressInstace = $.progressIndicator();\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\tapp.showModalWindow(data, function (data) {\n\t\t\t\t\t\t\tthisInstance.initTaxParameters(parentRow, $(data));\n\t\t\t\t\t\t\tthisInstance.registerChangeTaxModal(data, parentRow, params);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tprogressInstace.hide();\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function () {\n\t\t\t\t\t\tprogressInstace.hide();\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tlockCurrencyChange: false,\n\t\tregisterChangeCurrency() {\n\t\t\tthis.getInventoryHeadContainer().on('change', '.js-currency', (e) => {\n\t\t\t\tlet element = $(e.currentTarget),\n\t\t\t\t\tsymbol = element.find('option:selected').data('conversionSymbol');\n\t\t\t\tthis.currencyChangeActions(element, element.find('option:selected'));\n\t\t\t\tthis.form.find('.currencySymbol').text(symbol);\n\t\t\t});\n\t\t},\n\t\tregisterChangeDiscountAggregation() {\n\t\t\tthis.getInventoryHeadContainer().on('change', '.js-discount_aggreg', (e) => {\n\t\t\t\tthis.rowsCalculations();\n\t\t\t});\n\t\t},\n\t\tregisterChangeTaxModal: function (modal, parentRow, params) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet form = modal.find('form');\n\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\tmodal.on('change', '.individualTaxType', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tmodal.find('.individualTaxContainer .input-group-text').text(element.data('symbol'));\n\t\t\t});\n\t\t\tmodal.on('change', '.activeCheckbox[name=\"aggregationType\"]', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tif (element.attr('type') == 'checkbox' && this.checked) {\n\t\t\t\t\telement.closest('.js-panel').find('.js-panel__body').removeClass('d-none');\n\t\t\t\t\telement.closest('.js-panel').addClass('js-active');\n\t\t\t\t} else if (element.attr('type') == 'radio') {\n\t\t\t\t\tmodal.find('.js-panel').removeClass('js-active');\n\t\t\t\t\tmodal.find('.js-panel .js-panel__body').addClass('d-none');\n\t\t\t\t\telement.closest('.js-panel').find('.js-panel__body').removeClass('d-none');\n\t\t\t\t\telement.closest('.js-panel').addClass('js-active');\n\t\t\t\t} else {\n\t\t\t\t\telement.closest('.js-panel').find('.js-panel__body').addClass('d-none');\n\t\t\t\t\telement.closest('.js-panel').removeClass('js-active');\n\t\t\t\t}\n\t\t\t});\n\t\t\tmodal.on('change', '.activeCheckbox, .globalTax, .individualTaxValue, .groupTax, .regionalTax', function () {\n\t\t\t\tthisInstance.calculateTax(parentRow, modal);\n\t\t\t});\n\t\t\tmodal.on('click', '.js-save-taxs', function () {\n\t\t\t\tif (form.validationEngine('validate') === false) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthisInstance.saveTaxsParameters(parentRow, modal);\n\t\t\t\tif (params.taxType == '0') {\n\t\t\t\t\tthisInstance.setTax(parentRow, App.Fields.Double.formatToDb(modal.find('.valueTax').text()));\n\t\t\t\t\tthisInstance.setTaxPercent(parentRow, App.Fields.Double.formatToDb(modal.find('.js-tax-value').text()));\n\t\t\t\t\tthisInstance.quantityChangeActions(parentRow);\n\t\t\t\t} else {\n\t\t\t\t\tlet rate =\n\t\t\t\t\t\tApp.Fields.Double.formatToDb(modal.find('.valueTax').text()) /\n\t\t\t\t\t\tApp.Fields.Double.formatToDb(modal.find('.valueNetPrice').text());\n\t\t\t\t\tparentRow.find(thisInstance.rowClass).each(function () {\n\t\t\t\t\t\tlet totalPrice;\n\t\t\t\t\t\tif ($('.netPrice', $(this)).length > 0) {\n\t\t\t\t\t\t\ttotalPrice = thisInstance.getNetPrice($(this));\n\t\t\t\t\t\t} else if ($('.totalPrice', $(this)).length > 0) {\n\t\t\t\t\t\t\ttotalPrice = thisInstance.getTotalPrice($(this));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthisInstance.setTax($(this), totalPrice * rate);\n\t\t\t\t\t\tthisInstance.setTaxPercent($(this), App.Fields.Double.formatToDb(modal.find('.js-tax-value').text()));\n\t\t\t\t\t\tthisInstance.quantityChangeActions($(this));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tapp.hideModalWindow();\n\t\t\t});\n\t\t},\n\t\tregisterRowAutoComplete: function (container) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet sourceFieldElement = container.find('.sourceField.js-name');\n\t\t\tsourceFieldElement.on(Vtiger_Edit_Js.referenceSelectionEvent, function (e, params) {\n\t\t\t\tlet record = params.record;\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tlet parentRow = element.closest(thisInstance.rowClass);\n\t\t\t\tlet selectedModule = parentRow.find('.rowName [name=\"popupReferenceModule\"]').val();\n\t\t\t\tlet dataUrl =\n\t\t\t\t\t'index.php?module=' +\n\t\t\t\t\tapp.getModuleName() +\n\t\t\t\t\t'&action=Inventory&mode=getDetails&record=' +\n\t\t\t\t\trecord +\n\t\t\t\t\t'&fieldname=' +\n\t\t\t\t\telement.data('columnname');\n\t\t\t\tif (thisInstance.getCurrency()) {\n\t\t\t\t\tdataUrl += '&currency_id=' + thisInstance.getCurrency();\n\t\t\t\t}\n\t\t\t\tAppConnector.request(dataUrl).done(function (data) {\n\t\t\t\t\tfor (let id in data) {\n\t\t\t\t\t\tif (typeof data[id] == 'object') {\n\t\t\t\t\t\t\tlet recordData = data[id];\n\t\t\t\t\t\t\tthisInstance.mapResultsToFields(selectedModule, parentRow, recordData);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Mass add entries.\n\t\t */\n\t\tregisterMassAddItem: function () {\n\t\t\tthis.getForm().on('click', '.js-mass-add', (e) => {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\tlet moduleName = currentTarget.data('module');\n\t\t\t\tlet url = currentTarget.data('url');\n\t\t\t\tapp.showRecordsList(url, (_, instance) => {\n\t\t\t\t\tinstance.setSelectEvent((data) => {\n\t\t\t\t\t\tfor (let i in data) {\n\t\t\t\t\t\t\tlet parentElem = this.addItem(moduleName, '', false, currentTarget.closest('.js-inv-container-group'));\n\t\t\t\t\t\t\tVtiger_Edit_Js.getInstance().setReferenceFieldValue(parentElem, {\n\t\t\t\t\t\t\t\tname: data[i],\n\t\t\t\t\t\t\t\tid: i\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tcalculateItemNumbers: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet items = this.getInventoryItemsContainer();\n\t\t\tlet i = 1;\n\t\t\titems.find(thisInstance.rowClass).each(function () {\n\t\t\t\t$(this).find('.itemNumberText').text(i);\n\t\t\t\ti++;\n\t\t\t});\n\t\t},\n\t\tinitItem: function (container) {\n\t\t\tlet thisInstance = this;\n\t\t\tif (typeof container === 'undefined') {\n\t\t\t\tcontainer = thisInstance.getInventoryItemsContainer();\n\t\t\t}\n\t\t\tthisInstance.registerDeleteLineItemEvent(container);\n\t\t\tthisInstance.registerPriceBookModal(container);\n\t\t\tthisInstance.registerRowChangeEvent(container);\n\t\t\tthisInstance.registerRowAutoComplete(container);\n\t\t\tthisInstance.checkDeleteIcon();\n\t\t\tthisInstance.rowsCalculations();\n\t\t\tthisInstance.updateRowSequence();\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(container.find('.selectInv'));\n\t\t\tApp.Fields.Date.register(container, true, {}, 'dateFieldInv');\n\t\t\tcontainer.validationEngine('detach');\n\t\t\tcontainer.validationEngine(app.validationEngineOptions);\n\t\t\tApp.Fields.Text.Editor.register(container);\n\t\t},\n\t\t/**\n\t\t * Load inventory data for specified record\n\t\t * @param {int} recordId\n\t\t * @param {string} sourceModule\n\t\t * @param {function|bool} success callback\n\t\t * @param {function|bool} fail callback\n\t\t * @returns Promise\n\t\t */\n\t\tloadInventoryData(recordId, sourceModule, success = false, fail = false) {\n\t\t\tconst progressLoader = $.progressIndicator({ blockInfo: { enabled: true } });\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tsrc_module: sourceModule,\n\t\t\t\t\tsrc_record: recordId,\n\t\t\t\t\taction: 'Inventory',\n\t\t\t\t\tmode: 'getTableData',\n\t\t\t\t\trecord: app.getRecordId()\n\t\t\t\t})\n\t\t\t\t\t.done((response) => {\n\t\t\t\t\t\tlet activeModules = [];\n\t\t\t\t\t\tthis.getInventoryHeadContainer()\n\t\t\t\t\t\t\t.find('.js-inv-add-item')\n\t\t\t\t\t\t\t.each((_, addBtn) => {\n\t\t\t\t\t\t\t\tactiveModules.push($(addBtn).data('module'));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tprogressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tconst oldCurrencyChangeAction = this.currencyChangeActions;\n\t\t\t\t\t\tthis.currencyChangeActions = function changeCurrencyActions(select, option) {\n\t\t\t\t\t\t\tthis.currencyConvertValues(select, option);\n\t\t\t\t\t\t\tselect.data('oldValue', select.val());\n\t\t\t\t\t\t};\n\t\t\t\t\t\tconst first = response.result[Object.keys(response.result)[0]];\n\t\t\t\t\t\tthis.setCurrencyParam(first.currencyparam);\n\t\t\t\t\t\tthis.setCurrency(first.currency);\n\t\t\t\t\t\tthis.setDiscountMode(first.discountmode);\n\t\t\t\t\t\tthis.setTaxMode(first.taxmode);\n\t\t\t\t\t\tthis.currencyChangeActions = oldCurrencyChangeAction;\n\t\t\t\t\t\tthis.clearInventory();\n\t\t\t\t\t\t$.each(response.result, (_, row) => {\n\t\t\t\t\t\t\tif (activeModules.indexOf(row.moduleName) !== -1) {\n\t\t\t\t\t\t\t\tthis.addItem(row.moduleName, row.basetableid, row);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\t\ttext: app\n\t\t\t\t\t\t\t\t\t\t.vtranslate('JS_INVENTORY_ITEM_MODULE_NOT_FOUND')\n\t\t\t\t\t\t\t\t\t\t.replace('${sourceModule}', row.moduleName)\n\t\t\t\t\t\t\t\t\t\t.replace('${position}', row.info.name)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.summaryCalculations();\n\t\t\t\t\t\tresolve(response.result);\n\t\t\t\t\t\tif (typeof success === 'function') {\n\t\t\t\t\t\t\tsuccess(response.result);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.fail((error, err) => {\n\t\t\t\t\t\tprogressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\treject(error, err);\n\t\t\t\t\t\tif (typeof fail === 'function') {\n\t\t\t\t\t\t\tfail(error, err);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Clear inventory data\n\t\t */\n\t\tclearInventory: function () {\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find('.inventoryRow')\n\t\t\t\t.each((_, e) => {\n\t\t\t\t\tlet num = $(e).attr('numrow');\n\t\t\t\t\tthis.deleteLineItem(num);\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will register all the events\n\t\t */\n\t\tregisterEvents: function (container) {\n\t\t\tthis.form = container;\n\t\t\tthis.loadConfig();\n\t\t\tthis.registerInventorySaveData();\n\t\t\tthis.registerAddItem();\n\t\t\tthis.registerAddBlock();\n\t\t\tthis.registerMassAddItem();\n\t\t\tthis.initItem();\n\t\t\tthis.registerSortableItems();\n\t\t\tthis.registerSubProducts();\n\t\t\tthis.registerChangeDiscount();\n\t\t\tthis.registerChangeTax();\n\t\t\tthis.registerClearReferenceSelection();\n\t\t\tthis.registerShowHideExpanded();\n\t\t\tthis.registerChangeCurrency();\n\t\t\tthis.registerChangeDiscountAggregation();\n\t\t\tthis.setDefaultGlobalTax(container);\n\t\t\tapp.registerBlockToggleEvent(container);\n\t\t}\n\t}\n);\n"],"names":["$","Class","inventoryInstance","getInventoryInstance","container","find","val","moduleClassName","registerEvents","form","discount","tax","inventoryContainer","inventoryHeadContainer","summaryTaxesContainer","summaryDiscountContainer","summaryCurrenciesContainer","rowClass","discountModalFields","taxModalFields","getForm","loadConfig","JSON","parse","getContainer","getInventoryItemsContainer","getInventoryHeadContainer","getInventorySummaryDiscountContainer","getInventorySummaryTaxesContainer","getInventorySummaryCurrenciesContainer","getNextLineItemRowNumber","rowNumber","parseInt","$inventoryItemsNo","getAccountId","accountReferenceField","checkDeleteIcon","length","showLineItemsDeleteIcon","app","getMainParams","hideLineItemsDeleteIcon","removeClass","addClass","getClosestRow","element","closest","getBasicRow","eq","clone","isRecordSelected","productField","parentRow","validationEngine","getTaxModeSelectElement","row","items","isIndividualTaxMode","selectedOption","default_mode","isGroupTaxMode","showIndividualTax","groupTax","thisInstance","newRow","taxParam","aggregationType","each","parseFloat","thisItem","attr","setTaxParam","setTax","setTaxPercent","setDefaultGlobalTax","rowsCalculations","taxDefaultValue","data","isGroupTax","summaryContainer","getTaxParams","stringify","quantityChangeActions","getDiscountModeSelectElement","isIndividualDiscountMode","showIndividualDiscount","groupDiscount","setDiscount","setDiscountParam","getCurrency","getDiscountAggregation","aggregation","getTax","self","taxParams","valuePrices","getNetPrice","taxRate","types","forEach","entry","taxValue","individualTax","globalTax","regionalTax","getTaxPercent","taxPercent","getQuantityValue","getNumberFromValue","getUnitPriceValue","getDiscount","discountParams","getTotalPrice","discountRate","individualDiscountType","individualDiscount","globalDiscount","additionalDiscount","getGrossPrice","getPurchase","qty","purchase","App","Fields","Double","formatToDb","getSummaryGrossPrice","price","setCurrency","trigger","setCurrencyParam","setDiscountMode","setTaxMode","setName","display","setQuantity","setUnit","text","setSubUnit","setComment","parent","setUnitPrice","formatToDisplay","setPurchase","setNetPrice","setGrossPrice","setTotalPrice","setMargin","setMarginP","rowCalculations","summaryCalculations","calculateTotalPrice","calculateDiscounts","calculateNetPrice","calculateTaxes","calculateGrossPrice","calculateMargin","event","syncHeaderData","calculateItemNumbers","calculateSummary","calculateDiscountSummary","calculateTaxSummary","calculateCurrenciesSummary","calculateMarginPSummary","field","sum","e","totalPriceField","sumRow","sumPrice","getNumberFromText","marginp","purchasePrice","subtraction","getAllDiscount","selected","base","conversionRate","baseConversionRate","getAllTaxes","html","taxes","index","value","appendTo","typeSummary","netPrice","params","param","_","name","percent","old","margin","calculateDiscount","_row","modal","discountsType","netPriceBeforeDiscount","prop","panel","calculateTax","netPriceWithoutTax","taxType","updateRowSequence","registerInventorySaveData","on","Vtiger_Edit_Js","recordPreSave","checkLimits","classElement","block","header","pricebooksModalHandler","lineItemRow","rowName","showRecordsList","module","src_module","src_record","src_field","currency_id","CONFIG","defaultCurrencyId","instance","setSelectEvent","responseData","AppConnector","request","action","record","id","done","result","errorLog","subProductsCashe","loadSubProducts","indicator","recordId","recordModule","removeSubProducts","inArray","addSubProducts","progressInstace","progressIndicator","hide","fail","subProductsContainer","remove","append","mapResultsToFields","referenceModule","unit","recordData","description","unitPriceValues","unitPriceValuesJson","parameters","type","inputField","next","editorInstance","CKEDITOR","instances","commentElement","setData","triggerQtyParam","qtyPerUnit","perUnit","saveDiscountsParameters","panels","info","push","saveTaxsParameters","extend","showExpandedRow","inventoryRowExpanded","hideExpandedRow","initDiscountsParameters","parameter","isArray","array","arrayValue","filter","change","initTaxParameters","toString","input","formatNumber","limitEnableSave","limit","response","account","async","dataType","getModuleName","mode","currency","thisInthisstance","status","showModalWindow","currencyChangeActions","select","option","currencyConvertValues","showCurrencyChangeModal","lockCurrencyChange","currencyParam","date","rate","conversion","hideModalWindow","one","previous","prevConversionRate","setRowData","rowData","autoFields","unitText","subunit","subunitText","comment1","net","gross","total","discountparam","discountParam","taxparam","tax_percent","addItem","baseTableId","group","sequenceNumber","replaced","replace","moduleLabels","children","initItem","getInstance","registerAutoCompleteFields","addBlock","newBlock","empty","getNextBlockId","after","registerSortableItems","map","o","Math","max","registerAddItem","currentTarget","dataset","registerAddBlock","sortable","handle","revert","tolerance","placeholder","helper","ui","width","start","num","item","Text","destroyEditor","startPos","stop","child","numrow","Editor","register","registerShowHideExpanded","registerPriceBookModal","registerRowChangeEvent","headContainer","registerSubProducts","registerClearReferenceSelection","referenceGroup","removeAttr","registerDeleteLineItemEvent","deleteLineItem","registerChangeDiscount","view","discountAggregation","relatedRecord","hasClass","totalPrice","discountType","registerChangeDiscountModal","validationEngineOptions","checked","registerChangeTax","sourceRecord","registerChangeTaxModal","registerChangeCurrency","symbol","registerChangeDiscountAggregation","registerRowAutoComplete","sourceFieldElement","referenceSelectionEvent","selectedModule","dataUrl","registerMassAddItem","moduleName","url","i","setReferenceFieldValue","parentElem","Picklist","showSelect2ElementView","Date","loadInventoryData","sourceModule","success","progressLoader","blockInfo","enabled","Promise","resolve","reject","getRecordId","activeModules","addBtn","first","Object","keys","currencyparam","discountmode","taxmode","oldCurrencyChangeAction","clearInventory","indexOf","Vtiger_Helper_Js","showMessage","vtranslate","basetableid","error","err","registerBlockToggleEvent"],"mappings":"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"}